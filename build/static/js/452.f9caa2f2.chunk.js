"use strict";(self.webpackChunkproperty_manage_system_web=self.webpackChunkproperty_manage_system_web||[]).push([[452],{28958:function(e,r,a){a.d(r,{Z:function(){return t}});var n=a(74569),s=a.n(n)().create({headers:{"Content-type":"application/json"}}),i=a(83708),t={upload:function(e,r,a){var n=new FormData;return n.append("files",e),s.post(i.rq+"/upload",n,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(r)},onUploadProgress:a})},getFiles:function(e){return s.get(i.rq+"/upload/files?_limit=10&_start=0&_sort=updatedAt:DESC")}}},9452:function(e,r,a){a.r(r);var n=a(74165),s=a(1413),i=a(15861),t=a(29439),l=a(56994),c=a(25066),o=a(72791),d=a(60364),u=a(64880),h=a(15301),p=a(28958),x=a(14934),m=a(80184);r.default=function(e){var r=e.match,a=(0,o.useState)(void 0),j=(0,t.Z)(a,2),f=j[0],g=j[1],v=(0,o.useState)(void 0),b=(0,t.Z)(v,2),_=b[0],y=b[1],C=(0,o.useState)(void 0),S=(0,t.Z)(C,2),Z=S[0],F=S[1],k=(0,o.useState)(0),w=(0,t.Z)(k,2),N=w[0],B=w[1],A=(0,d.useDispatch)(),T=(0,u.k6)(),W=((0,d.useSelector)((function(e){return e.auth.me})),(0,d.useSelector)((function(e){return e.auth.jwt}))),z=(0,c.TA)({initialValues:{id:r.params.id,address:"",area:"",serial_no:"",application_form_url:"",plans_url:"",acreage:""},onSubmit:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(a,i){var t,l,c,o,d;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,i.setSubmitting)(!0),t="",l="",r.params.id&&(t=Z.application_form_url,l=Z.plans_url),void 0!==f){e.next=8;break}e.next=12;break;case 8:return e.next=10,p.Z.upload(f[0],W,null);case 10:c=e.sent,t=c.data[0].url;case 12:if(void 0!==_){e.next=15;break}e.next=19;break;case 15:return e.next=17,p.Z.upload(_[0],W,null);case 17:o=e.sent,l=o.data[0].url;case 19:"lowRise"===a.settlementType&&(a.unitNo=""),d=(0,s.Z)((0,s.Z)({},a),{},{application_form_url:t,plans_url:l}),console.log("save property="+JSON.stringify(d)),A((0,h.Yf)(d)).then((function(){r.params.id?T.push("/admin/properties/".concat(r.params.id)):T.push("/admin/properties")}));case 23:case"end":return e.stop()}}),e)})));return function(r,a){return e.apply(this,arguments)}}()}),V=z.handleChange,$=z.handleSubmit,D=z.handleBlur,J=z.errors,O=z.touched,R=z.values,q=(z.isValid,z.isSubmitting),E=z.resetForm,P=z.setValues;z.setFieldValue,z.setFieldTouched;(0,o.useEffect)((function(){r.params.id&&A((0,h.fF)(r.params.id)).then((function(e){var r=e.value;F(r),P((0,s.Z)((0,s.Z)({},r),r.location))}))}),[A,r.params.id,P]);return(0,m.jsxs)("main",{children:[(0,m.jsx)(x.Z,{}),(0,m.jsx)("div",{className:"content",children:(0,m.jsxs)(l.im,{activeTab:"home",onActiveTabChange:function(e){return B(e)},children:[(0,m.jsx)(l.n2,{variant:"tabs",children:(0,m.jsx)(l.U6,{children:(0,m.jsx)(l.AQ,{"data-tab":"home",children:r.params.id?"Record id: ".concat(r.params.id):"New Property"})})}),(0,m.jsx)(l.gr,{children:(0,m.jsx)(l.IA,{"data-tab":"home",children:(0,m.jsx)(l.rb,{active:0===N,children:(0,m.jsx)(l.b7,{md:10,children:(0,m.jsx)(l.lx,{onSubmit:$,children:(0,m.jsxs)(l.xH,{children:[(0,m.jsxs)(l.sl,{children:[(0,m.jsx)(l.b7,{xs:"12",children:(0,m.jsxs)(l.We,{children:[(0,m.jsx)(l.cc,{htmlFor:"area",children:"\u5730\u533a"}),(0,m.jsx)(l.C$,{id:"area",name:"area",onChange:V,onBlur:D,value:R.area,invalid:O.area&&J.area}),(0,m.jsx)(l.ev,{children:J.area})]})}),(0,m.jsx)(l.b7,{xs:"12",children:(0,m.jsxs)(l.We,{children:[(0,m.jsx)(l.cc,{htmlFor:"serial_no",children:"\u7f16\u53f7"}),(0,m.jsx)(l.C$,{id:"serial_no",name:"serial_no",onChange:V,onBlur:D,value:R.serial_no,invalid:O.serial_no&&J.serial_no}),(0,m.jsx)(l.ev,{children:J.serial_no})]})}),(0,m.jsx)(l.b7,{xs:"12",children:(0,m.jsxs)(l.We,{children:[(0,m.jsx)(l.cc,{htmlFor:"address",children:"\u5730\u5740"}),(0,m.jsx)(l.C$,{id:"address",name:"address",onChange:V,onBlur:D,value:R.address,invalid:O.address&&J.address}),(0,m.jsx)(l.ev,{children:J.address})]})}),(0,m.jsx)(l.b7,{xs:"12",children:(0,m.jsxs)(l.We,{children:[(0,m.jsx)(l.cc,{htmlFor:"locality",children:"\u5730\u5740\u4fe1\u606f \xa0\xa0"}),(0,m.jsxs)(l.cc,{htmlFor:"fileName",children:[R.application_form_url," \xa0\xa0"]}),(0,m.jsx)("br",{}),(0,m.jsx)("input",{type:"file",onChange:function(e){g(e.target.files),console.log("file selected.."+JSON.stringify(e.target.files))}})]})}),(0,m.jsx)(l.b7,{xs:"12",children:(0,m.jsxs)(l.We,{children:[(0,m.jsx)(l.cc,{htmlFor:"locality",children:"\u5730\u5740\u56fe\u7eb8\xa0\xa0"}),(0,m.jsxs)(l.cc,{htmlFor:"fileName",children:[R.plans_url," \xa0\xa0"]}),(0,m.jsx)("br",{}),(0,m.jsx)("input",{type:"file",onChange:function(e){y(e.target.files),console.log("file selected.."+JSON.stringify(e.target.files))}})]})}),(0,m.jsx)(l.b7,{xs:"12",children:(0,m.jsxs)(l.We,{children:[(0,m.jsx)(l.cc,{htmlFor:"acreage",children:"\u9762\u79ef"}),(0,m.jsx)(l.C$,{id:"acreage",name:"acreage",onChange:V,onBlur:D,value:R.acreage,invalid:O.acreage&&J.acreage}),(0,m.jsx)(l.ev,{children:J.acreage})]})})]}),(0,m.jsxs)(l.Bt,{className:"text-right",children:[(0,m.jsx)(l.u5,{type:"submit",size:"sm",color:"primary",children:q?(0,m.jsx)(l.LQ,{size:"sm"}):"Submit"})," ",(0,m.jsx)(l.u5,{type:"reset",size:"sm",color:"danger",onClick:function(){return E()},children:"Reset"})]})]})})})})})})]})})]})}}}]);
//# sourceMappingURL=452.f9caa2f2.chunk.js.map