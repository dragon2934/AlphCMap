"use strict";(self.webpackChunkproperty_manage_system_web=self.webpackChunkproperty_manage_system_web||[]).push([[536],{24219:function(e,n,r){r.d(n,{Z:function(){return g}});r(72791);var t=r(75611),i=r(14934),s=r(60364),o=r(64880),l=r(62298),a=r(95234),c=r(81815),d=r(56153),u=r(58031),h=r(92299),m=r(2138),p=r(80184),x=function(){var e=(0,o.k6)(),n=(0,s.useDispatch)(),r=(0,s.useSelector)((function(e){return e.app.showVerificationModal})),t=(0,s.useSelector)((function(e){return e.registerForm.user})),i=(0,s.useSelector)((function(e){return e.auth.user}));if(t)return null;if(!i)return null;var x=i.username!==i.email,g=x&&i.emailVerified&&i.mobileVerified||!x&&i.mobileVerified;return r?(0,p.jsx)(l.Z,{size:"lg",isOpen:!0,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:(0,p.jsxs)(a.Z,{children:[!g&&(0,p.jsx)("div",{className:"pb-3",children:"Please verify your email and mobile phone to start using website."}),(0,p.jsx)(h.Z,{}),(0,p.jsx)(m.Z,{}),g&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"success mt-5 mb-3",children:"Verification Successful!"}),(0,p.jsx)(c.Z,{block:!0,color:"success",onClick:function(){try{window.ReactNativeWebView.postMessage(JSON.stringify({action:"goBack"}))}catch(e){}n((0,u.mk)()),setTimeout((function(){location.reload(!0)}),500)},children:"Start Using Website"})]}),!g&&(0,p.jsx)(d.Z,{noGutters:!0,className:"justify-content-end",children:(0,p.jsx)(c.Z,{color:"link",size:"sm",onClick:function(){e.push("/logout")},children:"Logout"})})]})}):null},g=function(e){var n=e.children;return(0,p.jsxs)("main",{children:[(0,p.jsx)(i.Z,{}),(0,p.jsx)("div",{className:"content",children:n}),(0,p.jsx)(t.Z,{}),(0,p.jsx)(x,{})]})}},33937:function(e,n,r){r.r(n),r.d(n,{default:function(){return Ve}});var t=r(29439),i=r(72791),s=r(60364),o=r(64880),l=r(99574),a=r(71757),c=r(2053),d=r(24219),u=r(93433),h=r(1413),m=r(74165),p=r(15861),x=r(15671),g=r(43144),f=r(97326),j=r(60136),Z=r(98557),y=r(5483),b=r.n(y),v=r(74230),N=r(18099),k=r(80184);b().accessToken="pk.eyJ1IjoieWt1cnNhdCIsImEiOiJjam9rMmFrZGkwMmpjM3F0b3huZ2hkM2VnIn0.tuCDaZM6aIA2KQZbtucKpQ";var C=function(e){var n=e.className,r=(0,i.useState)(null),s=(0,t.Z)(r,2),o=s[0],l=s[1],a=(0,i.useRef)(null),c=(0,i.useContext)(v.ZP);return(0,i.useLayoutEffect)((function(){document.onresize=function(){c.map.resize()}})),(0,i.useEffect)((function(){o||function(e){var n=e.setMap,r=e.mapContainer,t=new(b().Map)({container:r.current,style:"mapbox://styles/mapbox/streets-v11",center:[-79.4164156,43.63982499999999],zoom:7,attributionControl:!1}),i=new(b().NavigationControl)({showCompass:!1,showZoom:!0});t.addControl(i,"bottom-right"),t.on("load",(function(){n(t),c.setMap(t),t.resize()})),console.log("Map Init......")}({setMap:l,mapContainer:a})}),[c,o]),(0,k.jsxs)("div",{className:"d-flex flex-fill ".concat(n||""),children:[(0,k.jsx)(N.Z,{}),(0,k.jsx)("div",{className:"flex-fill",ref:function(e){return a.current=e}})]})},w=r(15301),S=r(5329),P=r(57577),T=r(34641),M=r(56994),F=r(56153),I=r(27988),B=r(81815),A=function(e){e.id;var n=e.email,r=e.property,t=e.cb,i=(e.changeColor,e.editMode),s=e.cbBinding,o=e.cbSendEmail,l=e.cbBusiness,a=e.user,c=e.cbBusinessInfo;return console.log("....render property.."+JSON.stringify(r)),console.log("..me.."+JSON.stringify(a)),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("h4",{children:n}),(0,k.jsxs)(F.Z,{className:"justify-content-end",children:[r.bindingName&&null!==r.bindingName&&"null"!==r.bindingName?(0,k.jsxs)(I.Z,{className:"bindingInfo",children:["Name: ",r.bindingName,"  "]}):null,r.bindingEmail&&null!==r.bindingEmail&&"null"!==r.bindingEmail?(0,k.jsxs)(I.Z,{className:"bindingInfo",children:["Email: ",r.bindingEmail," ",(0,k.jsx)(M.u5,{onClick:function(e){return o(e,r)},children:"Send Email"}),"  "]}):null]}),(0,k.jsxs)(F.Z,{className:"justify-content-end",children:[r.bindingPhone&&null!==r.bindingPhone&&"null"!==r.bindingPhone?(0,k.jsxs)(I.Z,{className:"bindingInfo",children:["Phone: ",r.bindingPhone,"  "]}):null,r.bindingOthers&&null!==r.bindingOthers&&"null"!==r.bindingOthers?(0,k.jsxs)(I.Z,{className:"bindingInfo",children:["Others: ",r.bindingOthers,"  "]}):null]}),i?(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(F.Z,{className:"justify-content-end",children:(0,k.jsx)(I.Z,{className:"list-unstyled text-right",children:(0,k.jsxs)("li",{children:[null!==a&&void 0!==a&&r.id===a.property.id?(0,k.jsxs)(k.Fragment,{children:["  ",(0,k.jsx)(B.Z,{size:"sm",onClick:function(){return l(n,r)},children:"Business"})," \xa0\xa0\xa0\xa0"]}):null,(0,k.jsx)(B.Z,{size:"sm",onClick:function(){s(n,r)},children:"Info"})," \xa0\xa0\xa0\xa0",r.ownerMobileNumber===a.mobileNumber?r.primaryAddress?(0,k.jsx)(B.Z,{color:"primary",size:"sm",onClick:function(){return t(n,!0)},children:"Change Location"}):(0,k.jsx)(B.Z,{color:"primary",size:"sm",onClick:function(){return t(n,!1)},children:"Remove"}):null]})})})}):r.is_business?"0"===r.connected?(0,k.jsxs)(k.Fragment,{children:[" ",(0,k.jsx)(B.Z,{size:"sm",onClick:function(){c(n,r)},children:"Info"}),"  "]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(B.Z,{size:"sm",onClick:function(){c(n,r)},children:"Info"}),"  "]}):null]})},O=r(91523),_=r(69362),D=r.n(_),E=r(25066),z=r(44517),L=r(54555),R=r(66919),U=r(73002),J=r(81778),V=r(42937),q=r(64064),W=r(35390),H=q.Ry().shape({}),G=function(e){var n=e.wizardInstance,r=(0,s.useDispatch)(),t=(0,s.useSelector)((function(e){return e.registerForm})),i=t.address,o=t.rural,l=(0,s.useSelector)((function(e){return e.utilsData}));i.steps=1;var a=(0,E.TA)({initialValues:i,validationSchema:H,onSubmit:function(e,t){(0,t.setSubmitting)(!0),r((0,W.ZF)({address:(0,h.Z)((0,h.Z)({},i),e)})),n.nextStep()}}),c=a.handleChange,d=a.handleBlur,u=a.handleSubmit,m=a.errors,p=a.touched,x=a.values,g=a.isValid,f=a.isSubmitting,j=function(){r((0,W.ZF)({address:(0,h.Z)((0,h.Z)({},i),x)})),d.apply(void 0,arguments)};return(0,k.jsxs)(z.Z,{onSubmit:u,children:[(0,k.jsx)(I.Z,{children:(0,k.jsx)(L.Z,{type:"hidden",value:1,name:"steps"})}),(0,k.jsx)(I.Z,{children:(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(U.Z,{for:"postalCode",children:"Postal Code"}),(0,k.jsx)(L.Z,{type:"text",name:"postalCode",id:"postalCode",onChange:c,onBlur:j,value:x.postalCode,invalid:p.postalCode&&m.postalCode,placeholder:""}),(0,k.jsx)(J.Z,{children:m.postalCode})]})}),(0,k.jsx)(I.Z,{children:(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(U.Z,{for:"postalCode",children:"Street Number"}),(0,k.jsx)(L.Z,{type:"text",name:"streetNumber",id:"streetNumber",onChange:c,onBlur:j,value:x.streetNumber,invalid:p.streetNumber&&m.streetNumber,placeholder:""}),(0,k.jsx)(J.Z,{children:m.streetNumber})]})}),(0,k.jsx)(I.Z,{children:(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(U.Z,{for:"route",children:"Street /Route / Lot No / Plot No / Local Identifier"}),(0,k.jsx)(L.Z,{type:"text",name:"route",id:"route",onChange:c,onBlur:j,value:x.route,invalid:p.route&&m.route,placeholder:""}),(0,k.jsx)(J.Z,{children:m.route})]})}),(0,k.jsx)(I.Z,{children:(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(U.Z,{for:"route",children:" City / Locality"}),(0,k.jsx)(L.Z,{type:"text",name:"locality",id:"locality",onChange:c,onBlur:j,value:x.locality,invalid:p.locality&&m.locality,placeholder:""}),(0,k.jsx)(J.Z,{children:m.locality})]})}),o&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(I.Z,{children:(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(U.Z,{for:"lotNo",children:"Lot No"}),(0,k.jsx)(L.Z,{type:"text",name:"lotNo",id:"lotNo",onChange:c,onBlur:j,value:x.lotNo,invalid:p.lotNo&&m.lotNo,placeholder:""}),(0,k.jsx)(J.Z,{children:m.lotNo})]})}),(0,k.jsx)(I.Z,{children:(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(U.Z,{for:"plotNo",children:"Plot No"}),(0,k.jsx)(L.Z,{type:"text",name:"plotNo",id:"plotNo",onChange:c,onBlur:j,value:x.plotNo,invalid:p.plotNo&&m.plotNo,placeholder:""}),(0,k.jsx)(J.Z,{children:m.plotNo})]})}),(0,k.jsx)(I.Z,{children:(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(U.Z,{for:"region",children:"Region"}),(0,k.jsx)(L.Z,{type:"text",name:"region",id:"region",onChange:c,onBlur:j,value:x.region,invalid:p.region&&m.region,placeholder:""}),(0,k.jsx)(J.Z,{children:m.region})]})}),(0,k.jsx)(I.Z,{children:(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(U.Z,{for:"province",children:"Province"}),(0,k.jsx)(L.Z,{type:"text",name:"province",id:"province",onChange:c,onBlur:j,value:x.province,invalid:p.province&&m.province,placeholder:""}),(0,k.jsx)(J.Z,{children:m.province})]})})]}),(0,k.jsx)(I.Z,{children:(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(U.Z,{for:"route",children:"Province / State"}),(0,k.jsx)(L.Z,{type:"text",name:"city",id:"city",onChange:c,onBlur:j,value:x.city,invalid:p.city&&m.city,placeholder:""}),(0,k.jsx)(J.Z,{children:m.city})]})}),(0,k.jsx)(I.Z,{children:(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(U.Z,{for:"route",children:"Country"}),(0,k.jsx)(L.Z,{type:"text",name:"country",id:"country",onChange:c,onBlur:j,value:x.country,invalid:p.country&&m.country,placeholder:""}),(0,k.jsx)(J.Z,{children:m.country})]})}),(0,k.jsx)(I.Z,{children:(0,k.jsx)(B.Z,{block:!0,disabled:!g||f,children:f?(0,k.jsx)(V.Z,{size:"sm"}):"Next"})}),(0,k.jsx)(I.Z,{children:(0,k.jsx)(B.Z,{className:"mt-1 mb-5",color:"danger",block:!0,onClick:function(){l.connectToMerchantId=0,r((0,W.Oi)())},children:"Cancel"})}),(0,k.jsx)(I.Z,{children:(0,k.jsx)(U.Z,{for:"route",children:" ---------------- OR ----------------- "})}),(0,k.jsx)(I.Z,{children:(0,k.jsx)(B.Z,{className:"mt-1 mb-5",block:!0,onClick:function(){i.noDelivery=1,i.property=l.selectedProperty,n.goToStep(3)},children:"No Delivery"})})]})},Q=r(45987),K=r(37496),Y=r(48663),$=["unitNo"],X=["unitNo"],ee=["unitNo"],ne=function(e){var n=e.wizardInstance,r=(0,s.useDispatch)(),o=(0,s.useSelector)((function(e){return e.registerForm})).address,l=(0,s.useSelector)((function(e){return e.utilsData}));o.steps=2;(0,T.Jk)(o);var a=(0,E.TA)({initialValues:{primaryAddress:!0,hightRiseOrCommercial:!1,propertyName:"",totalFloors:"1",totalUnitsEachFloor:"1",addressType:"",settlementType:"",unitNo:""},isInitialValid:!1,validationSchema:Y.G,onSubmit:function(e,t){var i=t.setSubmitting;i(!0);var s=(0,T.Jk)(o);if(console.log("email="+s),e.hightRiseOrCommercial)r((0,W.OS)(s)).then((function(t){if(t.value.registered)m("This address is already registered! Please contact property management"),i(!1);else{"lowRise"===e.settlementType&&(e.unitNo="");var s=e.unitNo,l=(0,Q.Z)(e,$);r((0,W.ZF)((0,h.Z)((0,h.Z)({},l),{},{address:(0,h.Z)((0,h.Z)({},o),{},{unitNo:s})}))),n.nextStep()}})).catch((function(e){console.log("check property error"+e),m(JSON.stringify(e)),i(!1)}));else if("highRise"==e.settlementType)s=e.unitNo+"-"+s,r((0,W.OS)(s)).then((function(t){if(t.value.registered)m("This address is already registered! Please contact anything@alphc.com"),i(!1);else{"lowRise"===e.settlementType&&(e.unitNo="");var s=e.unitNo,l=(0,Q.Z)(e,X);r((0,W.ZF)((0,h.Z)((0,h.Z)({},l),{},{address:(0,h.Z)((0,h.Z)({},o),{},{unitNo:s})}))),n.nextStep()}})).catch((function(e){console.log("check property error"+e),m(JSON.stringify(e)),i(!1)}));else{"lowRise"===e.settlementType&&(e.unitNo="");var l=e.unitNo,a=(0,Q.Z)(e,ee);r((0,W.ZF)((0,h.Z)((0,h.Z)({},a),{},{address:(0,h.Z)((0,h.Z)({},o),{},{unitNo:l})}))),n.nextStep()}}}),c=(0,i.useState)(""),d=(0,t.Z)(c,2),u=d[0],m=d[1],p=a.handleChange,x=a.handleBlur,g=a.handleSubmit,f=a.errors,j=a.touched,Z=a.isValid,y=a.isSubmitting,b=a.setFieldValue,v=a.values;return(0,k.jsxs)(z.Z,{onSubmit:g,children:[(0,k.jsx)(I.Z,{children:(0,k.jsx)(L.Z,{type:"hidden",value:2,name:"steps"})}),(0,k.jsx)(I.Z,{children:(0,k.jsx)(R.Z,{tag:"fieldset",children:(0,k.jsx)(R.Z,{check:!0,children:(0,k.jsxs)(U.Z,{check:!0,children:[(0,k.jsx)(L.Z,{type:"checkbox",name:"primaryAddress",onChange:function(e){b("primaryAddress",e.currentTarget.checked)},checked:v.primaryAddress,onBlur:x,invalid:j.primaryAddress&&f.primaryAddress}),"This is my primary address"]})})})}),(0,k.jsx)(I.Z,{children:(0,k.jsx)(K.Z,{isOpen:!1===v.hightRiseOrCommercial,children:(0,k.jsxs)(R.Z,{tag:"fieldset",children:[(0,k.jsx)(U.Z,{for:"postalCode",children:"Address Type"}),(0,k.jsx)(R.Z,{check:!0,children:(0,k.jsxs)(U.Z,{check:!0,children:[(0,k.jsx)(L.Z,{type:"radio",name:"addressType",onChange:p,onBlur:x,value:"residential",invalid:j.addressType&&f.addressType}),"Residential"]})}),(0,k.jsx)(R.Z,{check:!0,children:(0,k.jsxs)(U.Z,{check:!0,children:[(0,k.jsx)(L.Z,{type:"radio",name:"addressType",onChange:p,onBlur:x,value:"commercial",invalid:j.addressType&&f.addressType}),"Commercial"]})}),(0,k.jsx)(R.Z,{check:!0,children:(0,k.jsxs)(U.Z,{check:!0,children:[(0,k.jsx)(L.Z,{type:"radio",name:"addressType",onChange:p,onBlur:x,value:"School",invalid:j.addressType&&f.addressType}),"School"]})})]})})}),(0,k.jsx)(I.Z,{children:(0,k.jsx)(K.Z,{isOpen:"Incorporate"===v.addressType||"School"===v.addressType,children:(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(U.Z,{for:"lblPropertyName",children:"Name"}),(0,k.jsx)(L.Z,{type:"text",name:"propertyName",onChange:p,onBlur:x,value:v.propertyName,invalid:j.propertyName&&f.propertyName}),(0,k.jsx)(J.Z,{children:f.propertyName})]})})}),(0,k.jsx)(I.Z,{children:(0,k.jsxs)(R.Z,{tag:"fieldset",children:[(0,k.jsx)(U.Z,{for:"postalCode",children:"Settlement Type"}),(0,k.jsx)(K.Z,{isOpen:!1===v.hightRiseOrCommercial,children:(0,k.jsx)(R.Z,{check:!0,children:(0,k.jsxs)(U.Z,{check:!0,children:[(0,k.jsx)(L.Z,{type:"radio",name:"settlementType",onChange:p,onBlur:x,value:"lowRise",invalid:j.settlementType&&f.settlementType}),"Single Dwelling"]})})}),(0,k.jsx)(R.Z,{check:!0,children:(0,k.jsxs)(U.Z,{check:!0,children:[(0,k.jsx)(L.Z,{type:"radio",name:"settlementType",onChange:p,onBlur:x,value:"highRise",invalid:j.settlementType&&f.settlementType}),"High Rise / Multiple Units"]})})]})}),(0,k.jsx)(I.Z,{children:(0,k.jsx)(K.Z,{isOpen:"highRise"===v.settlementType,children:v.hightRiseOrCommercial?(0,k.jsx)(I.Z,{children:(0,k.jsxs)(R.Z,{children:[(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(U.Z,{for:"totalFloors",children:"Total Floors"}),(0,k.jsx)(L.Z,{type:"text",name:"totalFloors",onChange:p,onBlur:x,value:v.totalFloors,invalid:j.totalFloors&&f.totalFloors}),(0,k.jsx)(J.Z,{children:f.totalFloors})]}),(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(U.Z,{for:"totalUnitsEachFloor",children:"Total Units each floor"}),(0,k.jsx)(L.Z,{type:"text",name:"totalUnitsEachFloor",onChange:p,onBlur:x,value:v.totalUnitsEachFloor,invalid:j.totalUnitsEachFloor&&f.totalUnitsEachFloor}),(0,k.jsx)(J.Z,{children:f.totalUnitsEachFloor})]})]})}):(0,k.jsx)(I.Z,{children:(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(U.Z,{for:"postalCode",children:"Unit No"}),(0,k.jsx)(L.Z,{type:"text",name:"unitNo",onChange:p,onBlur:x,value:v.unitNo,invalid:j.unitNo&&f.unitNo}),(0,k.jsx)(J.Z,{children:f.unitNo})]})})})}),(0,k.jsx)(I.Z,{children:(0,k.jsx)(K.Z,{isOpen:u.length>0,children:(0,k.jsx)(U.Z,{color:"danger",for:"errorMessage",children:u})})}),(0,k.jsx)(I.Z,{children:(0,k.jsx)(B.Z,{block:!0,disabled:!Z||y,children:y?(0,k.jsx)(V.Z,{size:"sm"}):"Next"})}),(0,k.jsx)(I.Z,{children:(0,k.jsx)(B.Z,{className:"mt-1 mb-5",color:"danger",block:!0,onClick:function(){l.connectToMerchantId=0,r((0,W.Oi)())},children:"Cancel"})})]})},re=r(58031),te=function(){var e=(0,s.useDispatch)(),n=(0,o.k6)();return(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(z.Z,{children:[(0,k.jsx)("div",{className:"success mt-5 mb-3",children:"Registration Successful!"}),(0,k.jsx)(B.Z,{block:!0,color:"success",onClick:function(){window.ReactNativeWebView?setTimeout(n.push("/mobile-verify"),1e3):(e((0,W.Oi)()),e((0,re.mk)()))},children:"Verify your account"})]})})},ie=r(79318),se=r(11027),oe=r(36530),le=q.Ry().shape({mobileNumber:q.Z_().required("Mobile number is required"),email:q.Z_().required("Email is required").email("Invalid email"),companyName:q.Z_(),lastName:q.Z_(),password:q.Z_().min(6,"Password is  too Short!").max(16,"Password is too Long!").required("Password is required"),passwordConfirmation:q.Z_().required("Password confirmation is required").oneOf([q.iH("password"),null],"Passwords must match"),consent:q.O7().required("Confirm you have read Privacy Policy and Terms of Use").oneOf([!0],"Confirm you have read Privacy Policy and Terms of Use."),liability:q.O7().required("Confirm you have read above instruction").oneOf([!0],"Confirm you have read above instruction.")}),ae=function(e){var n=e.wizardInstance,r=(0,s.useDispatch)(),t=(0,s.useSelector)((function(e){return e.registerForm})),i=(0,s.useSelector)((function(e){return e.utilsData}));(0,s.useSelector)((function(e){return e.registerForm})).address.steps=3;var o=(0,E.TA)({initialValues:{mobileNumber:"",companyName:"",lastName:"",email:"",password:"",passwordConfirmation:"",consent:!1,liability:!1},isInitialValid:!1,validationSchema:le,onSubmit:function(e,s){var o=s.setSubmitting;o(!0);var l={property:(0,h.Z)({email:(0,T.Jk)(t.address),rural:t.rural,primaryAddress:t.primaryAddress,addressType:t.addressType,hightRiseOrCommercial:t.hightRiseOrCommercial,totalFloors:t.totalFloors,propertyName:t.propertyName,totalUnitsEachFloor:t.totalUnitsEachFloor,settlementType:t.settlementType,unitNo:t.unitNo,location:{longitude:t.longitude,latitude:t.latitude}},t.address),mobileNumber:e.mobileNumber,companyName:e.companyName,lastName:e.lastName,email:e.email,username:e.email,password:e.password,provider:"local",connectToMerchantId:i.connectToMerchantId};r((0,W.a$)(l)).then((function(){r((0,se.jo)()).then((function(e){console.log(".get me.resp.."+JSON.stringify(e)),r((0,W.ZF)({user:l,me:e.value})).then((function(){n.nextStep()}))})).catch((function(e){oe.Rt.error("Error","Mobile Or Password doesn't match, Please verify!")}))})).catch((function(e){if(e.message&&e.message[0].messages&&"Auth.form.error.mobileNumber.taken"===e.message[0].messages[0].id)p("mobileNumber","Mobile No. already registered")})).finally((function(){o(!1)}))}}),l=o.handleChange,a=o.handleBlur,c=o.handleSubmit,d=o.errors,u=o.touched,m=o.values,p=o.setFieldError,x=o.isValid,g=o.isSubmitting,f=o.setFieldValue,j=o.setFieldTouched;return(0,k.jsxs)(z.Z,{onSubmit:c,children:[(0,k.jsx)(I.Z,{children:(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(U.Z,{for:"mobileNumber",children:"Mobile Number"}),(0,k.jsx)(ie.Z,{setFieldValue:f,setFieldTouched:j,placeholder:"Mobile Number",name:"mobileNumber",value:m.mobileNumber,invalid:u.mobileNumber&&d.mobileNumber}),(0,k.jsx)(J.Z,{children:d.mobileNumber})]})}),(0,k.jsx)(I.Z,{children:(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(U.Z,{for:"companyName",children:"Company Name"}),(0,k.jsx)(L.Z,{type:"text",name:"companyName",id:"companyName",value:m.companyName,onChange:l,onBlur:a,invalid:u.companyName&&d.companyName}),(0,k.jsx)(J.Z,{children:d.companyName})]})}),(0,k.jsx)(I.Z,{children:(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(U.Z,{for:"lastName",children:"Name"}),(0,k.jsx)(L.Z,{type:"text",name:"lastName",id:"lastName",value:m.lastName,onChange:l,onBlur:a,invalid:u.lastName&&d.lastName}),(0,k.jsx)(J.Z,{children:d.lastName})]})}),(0,k.jsx)(I.Z,{children:(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(U.Z,{for:"email",children:"Email"}),(0,k.jsx)(L.Z,{type:"email",name:"email",id:"email",value:m.email,onChange:l,onBlur:a,invalid:u.email&&d.email,placeholder:"myemail@email.com"}),(0,k.jsx)(J.Z,{children:d.email})]})}),(0,k.jsx)(I.Z,{children:(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(U.Z,{for:"password",children:"Password"}),(0,k.jsx)(L.Z,{type:"password",name:"password",id:"password",value:m.password,onChange:l,onBlur:a,invalid:u.password&&d.password,placeholder:"********"}),(0,k.jsx)(J.Z,{children:d.password})]})}),(0,k.jsx)(I.Z,{children:(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(U.Z,{for:"passwordConfirmation",children:"Password Confirmation"}),(0,k.jsx)(L.Z,{type:"password",name:"passwordConfirmation",id:"passwordConfirmation",value:m.passwordConfirmation,onChange:l,onBlur:a,invalid:u.passwordConfirmation&&d.passwordConfirmation,placeholder:"********"}),(0,k.jsx)(J.Z,{children:d.passwordConfirmation})]})}),(0,k.jsx)(I.Z,{children:(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(L.Z,{type:"hidden",invalid:d.invalidProperty}),(0,k.jsx)(J.Z,{children:d.invalidProperty})]})}),(0,k.jsx)(I.Z,{children:(0,k.jsx)(R.Z,{tag:"fieldset",children:(0,k.jsxs)(R.Z,{check:!0,children:[(0,k.jsxs)(U.Z,{check:!0,children:[(0,k.jsx)(L.Z,{type:"checkbox",name:"consent",onChange:function(e){j("consent"),f("consent",e.currentTarget.checked)},checked:m.consent,onBlur:a,invalid:u.consent&&d.consent}),"I've read"," ",(0,k.jsx)("a",{target:"_blank",href:"/privacy-policy",children:"Privacy Policy"})," and"," ",(0,k.jsx)("a",{target:"_blank",href:"/terms-of-use",children:"Terms of Use"}),"."]}),(0,k.jsxs)(U.Z,{check:!0,children:[(0,k.jsx)(L.Z,{type:"checkbox",name:"liability",onChange:function(e){j("liability"),f("liability",e.currentTarget.checked)},checked:m.liability,onBlur:a,invalid:u.liability&&d.liability}),"Disclaimer: In an emergency contact your local first responder directly. AlphC E-Alert App is only an aid and is not intended to replace first responders. First responders can license this technology to increase the safety of your community."]})]})})}),(0,k.jsx)(I.Z,{children:(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(L.Z,{type:"hidden",invalid:d.consent}),(0,k.jsx)(J.Z,{children:d.consent})]})}),(0,k.jsx)(I.Z,{children:(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(L.Z,{type:"hidden",invalid:d.liability}),(0,k.jsx)(J.Z,{children:d.liability})]})}),(0,k.jsx)(I.Z,{children:(0,k.jsx)(B.Z,{block:!0,color:"success",disabled:!x||g,children:g?(0,k.jsx)(V.Z,{size:"sm"}):"Create Account"})}),(0,k.jsx)(I.Z,{children:(0,k.jsx)(B.Z,{className:"mt-1 mb-5",color:"danger",block:!0,onClick:function(){i.connectToMerchantId=0,r((0,W.Oi)())},children:"Cancel"})})]})},ce=function(){var e=(0,i.useState)({enterRight:"animated enterRight",enterLeft:"animated enterLeft",exitRight:"animated exitRight",exitLeft:"animated exitLeft",intro:"animated intro"}),n=(0,t.Z)(e,1)[0],r=(0,i.useState)(),s=(0,t.Z)(r,2),o=s[0],l=s[1];return(0,k.jsxs)(I.Z,{md:3,sm:12,xs:12,className:"overlay-form-container",children:[(0,k.jsx)(O.rU,{to:"/",children:(0,k.jsx)("img",{className:"logo-container",src:"/assets/img/logo-white.png",alt:"logo"})}),(0,k.jsxs)(D(),{className:"step-wizard",transitions:n,isLazyMount:!0,instance:function(e){return l(e)},children:[(0,k.jsx)(G,{wizardInstance:o}),(0,k.jsx)(ne,{wizardInstance:o}),(0,k.jsx)(ae,{wizardInstance:o}),(0,k.jsx)(te,{wizardInstance:o})]})]})},de=r(54164),ue=r(83708),he=function(e){var n=e.callback,r=(0,s.useSelector)((function(e){return e.utilsData}));console.log("...utilsData.."+JSON.stringify(r));var l=(0,s.useDispatch)(),a=((0,o.k6)(),(0,i.useState)("default")),c=(0,t.Z)(a,2),d=c[0],u=c[1],h=(0,s.useSelector)((function(e){return e.auth.me})),m=(0,i.useCallback)((function(e){console.log("..handle change ..."+e.target.value),u(e.target.value)}));return(0,k.jsxs)(I.Z,{md:3,sm:12,xs:12,className:"overlay-form-container",children:[(0,k.jsx)(O.rU,{to:"/",children:(0,k.jsx)("img",{className:"logo-container",src:"/assets/img/logo-white.png",alt:"logo"})}),(0,k.jsx)(F.Z,{style:{width:"80%",paddingLeft:"70px"},children:(0,k.jsx)(I.Z,{style:{textAlign:"left"},children:(0,k.jsxs)(R.Z,{tag:"fieldset",children:[(0,k.jsx)(R.Z,{check:!0,children:(0,k.jsxs)(U.Z,{check:!0,children:[(0,k.jsx)(L.Z,{type:"radio",name:"addressType",onChange:m,checked:"checked",value:"default"}),(0,k.jsx)("img",{src:ue.kM.property.default,style:{height:"30px"}})]})}),(0,k.jsx)(R.Z,{check:!0,children:(0,k.jsxs)(U.Z,{check:!0,children:[(0,k.jsx)(L.Z,{type:"radio",name:"addressType",onChange:m,value:"hasInjured"}),(0,k.jsx)("img",{src:ue.kM.property.hasInjured,style:{height:"30px"}})]})}),(0,k.jsx)(R.Z,{check:!0,children:(0,k.jsxs)(U.Z,{check:!0,children:[(0,k.jsx)(L.Z,{type:"radio",name:"addressType",onChange:m,value:"pending"}),(0,k.jsx)("img",{src:ue.kM.property.pending,style:{height:"30px"}})]})}),(0,k.jsx)(R.Z,{check:!0,children:(0,k.jsxs)(U.Z,{check:!0,children:[(0,k.jsx)(L.Z,{type:"radio",name:"addressType",onChange:m,value:"safe"}),(0,k.jsx)("img",{src:ue.kM.property.safe,style:{height:"30px"}})]})})]})})}),(0,k.jsxs)(F.Z,{children:[(0,k.jsx)(I.Z,{children:(0,k.jsx)(B.Z,{className:"mt-1 mb-5",color:"success",block:!0,onClick:function(){var e=r.emailForChangeColor,t={email:e,color:d,ownerMobileNumber:h.mobileNumber};r.changeColor=!1,l((0,re.AN)(t)).then((function(r){console.log("...change color.."+JSON.stringify(r)),setTimeout((function(){n(!0,d,e)}),500)})).catch((function(r){n(!1,d,e),console.log("...change color error.."+JSON.stringify(r))}))},children:"Confirm"})}),(0,k.jsx)(I.Z,{children:(0,k.jsx)(B.Z,{className:"mt-1 mb-5",color:"danger",block:!0,onClick:function(){r.changeColor=!1,l((0,re.b)())},children:"Cancel"})})]})]})},me=q.Ry().shape({bindingName:q.Z_().required("This field is required"),bindingEmail:q.Z_().required("This field is required")}),pe=function(e){e.callback;var n=(0,s.useSelector)((function(e){return e.utilsData}));console.log("...utilsData.."+JSON.stringify(n));var r=(0,s.useDispatch)(),l=((0,o.k6)(),(0,i.useState)("default")),a=(0,t.Z)(l,2),c=(a[0],a[1],n.selectedProperty),d=(0,s.useSelector)((function(e){return e.auth.me})),u=(0,E.TA)({initialValues:{bindingName:null!==c&&void 0!==c&&"null"!==c.bindingName?c.bindingName:"",bindingEmail:null!==c&&void 0!==c&&"null"!==c.bindingEmail?c.bindingEmail:"",bindingPhone:null!==c&&void 0!==c&&"null"!==c.bindingPhone?c.bindingPhone:"",bindingOthers:null!==c&&void 0!==c&&"null"!==c.bindingOthers?c.bindingOthers:""},isInitialValid:!1,validationSchema:me,onSubmit:function(e,t){(0,t.setSubmitting)(!0),n.bindingProperty=!1;var i=n.emailForChangeColor,s=n.fncCallback,o=(0,h.Z)({email:i,ownerMobileNumber:d.mobileNumber},e);r((0,w.BU)(o)).then((function(e){s&&s()}))}}),m=u.handleChange,p=u.handleBlur,x=u.handleSubmit,g=u.errors,f=u.touched,j=u.isValid,Z=u.isSubmitting,y=(u.setFieldValue,u.values);return(0,k.jsxs)(I.Z,{md:3,sm:12,xs:12,className:"overlay-form-container",children:[(0,k.jsx)(O.rU,{to:"/",children:(0,k.jsx)("img",{className:"logo-container",src:"/assets/img/logo-white.png",alt:"logo"})}),(0,k.jsxs)(z.Z,{onSubmit:x,children:[(0,k.jsx)(F.Z,{children:(0,k.jsx)(I.Z,{style:{textAlign:"left"},children:(0,k.jsxs)(R.Z,{tag:"fieldset",children:[(0,k.jsxs)(R.Z,{children:[(0,k.jsxs)(U.Z,{for:"lblPropertyName",children:["Name \xa0\xa0",(0,k.jsx)("span",{className:"item_required",children:"*"})]}),(0,k.jsx)(L.Z,{type:"text",name:"bindingName",onChange:m,onBlur:p,value:y.bindingName,invalid:f.bindingName&&g.bindingName}),(0,k.jsx)(J.Z,{children:g.bindingName})]}),(0,k.jsxs)(R.Z,{children:[(0,k.jsxs)(U.Z,{for:"lblPropertyName",children:["Email \xa0\xa0",(0,k.jsx)("span",{className:"item_required",children:"*"})]}),(0,k.jsx)(L.Z,{type:"text",name:"bindingEmail",onChange:m,onBlur:p,value:y.bindingEmail,invalid:f.bindingEmail&&g.bindingEmail}),(0,k.jsx)(J.Z,{children:g.bindingEmail})]}),(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(U.Z,{for:"lblPropertyName",children:"Phone"}),(0,k.jsx)(L.Z,{type:"text",name:"bindingPhone",onChange:m,onBlur:p,value:y.bindingPhone,invalid:f.bindingPhone&&g.bindingPhone}),(0,k.jsx)(J.Z,{children:g.bindingPhone})]}),(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(U.Z,{for:"lblPropertyName",children:"Others"}),(0,k.jsx)(L.Z,{type:"text",name:"bindingOthers",onChange:m,onBlur:p,value:y.bindingOthers,invalid:f.bindingOthers&&g.bindingOthers}),(0,k.jsx)(J.Z,{children:g.bindingOthers})]})]})})}),(0,k.jsxs)(F.Z,{children:[(0,k.jsx)(I.Z,{children:(0,k.jsx)(B.Z,{block:!0,disabled:!j||Z,children:Z?(0,k.jsx)(V.Z,{size:"sm"}):"Confirm"})}),(0,k.jsx)(I.Z,{children:(0,k.jsx)(B.Z,{className:"mt-1 mb-5",color:"danger",block:!0,onClick:function(){n.bindingProperty=!1,r((0,re.b)())},children:"Cancel"})})]})]})]})},xe=r(74434),ge=r.n(xe),fe=r(11397),je=r(66023),Ze=q.Ry().shape({promotionTitle:q.Z_().required("This field is required"),promotionContent:q.Z_().required("This field is required")}),ye=function(e){e.callback;var n=(0,s.useSelector)((function(e){return e.utilsData})),r=(0,s.useDispatch)(),l=((0,o.k6)(),(0,i.useState)("default")),a=(0,t.Z)(l,2),c=(a[0],a[1],n.selectedProperty),d=localStorage.getItem("current_domain");void 0!==d&&null!==d||(d="alphc.com");var u=(0,E.TA)({initialValues:{promotionTitle:"",promotionContent:""},isInitialValid:!1,validationSchema:Ze,onSubmit:function(e,t){(0,t.setSubmitting)(!0),n.drawFinished=!1;var i=[];c.map((function(e){console.log("....flyer form, property.."+JSON.stringify(e)),e.properties.bindingEmail&&i.push(e.properties.bindingEmail)}));var s={emails:i.join(","),promotionTitle:e.promotionTitle,promotionContent:e.promotionContent};r((0,w.$B)(s))}}),h=u.handleChange,m=u.handleBlur,p=u.handleSubmit,x=u.errors,g=u.touched,f=u.isValid,j=u.isSubmitting,Z=(u.setFieldValue,u.values),y=(0,i.useState)(0),b=(0,t.Z)(y,2),v=b[0],N=b[1];return(0,k.jsxs)(I.Z,{md:3,sm:12,xs:12,className:"overlay-form-container",children:[(0,k.jsx)(O.rU,{to:"/",children:(0,k.jsx)("img",{className:"logo-container",src:"/assets/img/logo-white.png",alt:"logo"})}),(0,k.jsxs)(z.Z,{onSubmit:p,children:[(0,k.jsx)(F.Z,{children:(0,k.jsx)(I.Z,{style:{textAlign:"left"},children:(0,k.jsxs)(R.Z,{tag:"fieldset",children:[(0,k.jsx)(M.cc,{children:"Send Communication:"}),(0,k.jsx)(M.GZ,{accent:!0,className:"mb-3",children:c.map((function(e){return(0,k.jsx)(M.Eb,{children:e.properties.email+"@"+d},e.properties.id)}))})]})})}),(0,k.jsx)(F.Z,{children:(0,k.jsx)(I.Z,{children:(0,k.jsxs)(R.Z,{children:[(0,k.jsx)(U.Z,{for:"lblPropertyName",children:"Title:"}),(0,k.jsx)(L.Z,{type:"text",name:"promotionTitle",onChange:h,onBlur:m,value:Z.promotionTitle,invalid:g.promotionTitle&&x.promotionTitle}),(0,k.jsx)(J.Z,{children:x.promotionTitle})]})})}),(0,k.jsx)(F.Z,{children:(0,k.jsx)(I.Z,{children:(0,k.jsxs)(R.Z,{class:"wrapper",children:[(0,k.jsx)(U.Z,{for:"lblPropertyName",children:"Content:"}),(0,k.jsx)(je.Z,{maxLength:1e3,rows:5,type:"text",name:"promotionContent",onChange:h,onBlur:m,onKeyUp:function(e){return function(e){var n=e.target.value.length;N(n)}(e)},value:Z.promotionContent,invalid:g.promotionContent&&x.promotionContent}),(0,k.jsxs)("div",{id:"the-count",children:[(0,k.jsx)("span",{id:"current",children:v}),(0,k.jsx)("span",{id:"maximum",children:"/ 1000"})]}),(0,k.jsx)(J.Z,{children:x.promotionContent})]})})}),(0,k.jsxs)(F.Z,{children:[(0,k.jsx)(I.Z,{children:(0,k.jsx)(B.Z,{block:!0,disabled:!f||j,children:j?(0,k.jsx)(V.Z,{size:"sm"}):"Confirm"})}),(0,k.jsx)(I.Z,{children:(0,k.jsx)(B.Z,{className:"mt-1 mb-5",color:"danger",block:!0,onClick:function(){n.drawFinished=!1,r((0,re.b)())},children:"Cancel"})})]})]})]})},be=r(36459),ve=r(39846),Ne=r(45904),ke=r(26971),Ce=r(32028),we=r(61606),Se=r(63664),Pe=r(36549),Te=r(16492),Me=r(43106),Fe=r(93127),Ie=r(56720),Be=r(82709),Ae=r(3582),Oe=r(20458),_e=r(13786),De=r(69326),Ee=r(15408),ze=r(91774),Le=function(e){(0,be.Z)(e);var n=(0,s.useSelector)((function(e){return e.utilsData})),r=(0,s.useDispatch)(),o=n.selectedProperty,l=(0,s.useSelector)((function(e){return e.auth.me})),a=(0,i.useState)(null),c=(0,t.Z)(a,2),d=c[0],u=c[1],h=(0,i.useState)(null),m=(0,t.Z)(h,2),p=m[0],x=m[1],g=function(e,n,r){var t=e.filter((function(e){return parseInt(e.dayOfWeek)===n}));if(t&&t.length>0){if(1===r)return t[0].openHour;if(2===r)return t[0].closeHour;if(3===r)return t[0].closed}return""},f=(0,i.useState)([]),j=(0,t.Z)(f,2),Z=j[0],y=j[1];(0,i.useEffect)((function(){r((0,w.WR)({id:o.id})).then((function(e){console.log("..property ..info.."+JSON.stringify(e.value)),u(e.value.companyProfile),y(e.value.workingHour)}));var e={id_type:1,id:o.id};return r((0,w.NH)(e)).then((function(e){console.log("..get total .."+JSON.stringify(e)),x(e.value.value[0].iCount)})).catch((function(e){})),function(){}}),[r,o]);var b="https://alphcmap.com/business-portal/"+o.id,v="";return(0,k.jsxs)(I.Z,{md:3,sm:12,xs:12,className:"overlay-form-container",children:[(0,k.jsx)(O.rU,{to:"/",children:(0,k.jsx)("img",{className:"logo-container",src:"/assets/img/logo-white.png",alt:"logo"})}),(0,k.jsx)(F.Z,{style:{width:"100%"},children:(0,k.jsx)(I.Z,{style:{textAlign:"left"},children:d&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(F.Z,{children:[(0,k.jsx)(I.Z,{children:(0,k.jsx)("h1",{children:d.companyName})})," "]}),(0,k.jsxs)(F.Z,{children:["   ",(0,k.jsxs)(I.Z,{children:[(0,k.jsx)("i",{className:"fa-solid fa-address"})," ",o.street_number+" "+o.route+" "+o.locality+","+o.city+","+o.postal_code," "]})," "]}),(0,k.jsxs)(F.Z,{children:["   ",(0,k.jsxs)(I.Z,{children:[(0,k.jsx)("i",{className:"fa-solid fa-phone"})," ",d.phone," "]})," "]}),(0,k.jsxs)(F.Z,{children:["   ",(0,k.jsxs)(I.Z,{children:[(0,k.jsx)("i",{className:"fa-solid fa-globe"})," ",d.website," "]})," "]}),p?(0,k.jsxs)(F.Z,{children:["   ",(0,k.jsxs)(I.Z,{children:["Connected: ",p," "]})," "]}):null,o.binding_email&&null!==o.binding_email&&"null"!==o.binding_email?(0,k.jsxs)(F.Z,{children:["   ",(0,k.jsxs)(I.Z,{children:[(0,k.jsx)("i",{className:"fa-solid fa-envelope"})," ",o.binding_email," "]})," "]}):null,(0,k.jsx)(F.Z,{children:(0,k.jsxs)(I.Z,{children:["Working Hours ",(0,k.jsx)("hr",{})]})}),(0,k.jsxs)(F.Z,{children:[(0,k.jsx)(I.Z,{md:3,children:(0,k.jsx)(U.Z,{style:{textAlign:"right"},for:"lblPropertyName",children:"Monday:"})}),!0===g(Z,0,3)?(0,k.jsxs)(k.Fragment,{children:["       ",(0,k.jsx)(I.Z,{md:9,children:(0,k.jsx)(U.Z,{for:"lblPropertyName",children:"We're Closed "})})]}):(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(I.Z,{md:9,children:(0,k.jsxs)(U.Z,{for:"lblPropertyName",children:[" ",g(Z,0,1)," - ",g(Z,0,2)," "]})})})]}),(0,k.jsxs)(F.Z,{children:[(0,k.jsx)(I.Z,{md:3,children:(0,k.jsx)(U.Z,{style:{textAlign:"right"},for:"lblPropertyName",children:"Tuesday:"})}),!0===g(Z,1,3)?(0,k.jsxs)(k.Fragment,{children:["       ",(0,k.jsx)(I.Z,{md:9,children:(0,k.jsx)(U.Z,{for:"lblPropertyName",children:"We're Closed "})})]}):(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(I.Z,{md:9,children:(0,k.jsxs)(U.Z,{for:"lblPropertyName",children:[" ",g(Z,1,1)," - ",g(Z,1,2)," "]})})})]}),(0,k.jsxs)(F.Z,{children:[(0,k.jsx)(I.Z,{md:3,children:(0,k.jsx)(U.Z,{style:{textAlign:"right"},for:"lblPropertyName",children:"Wednesday:"})}),!0===g(Z,2,3)?(0,k.jsxs)(k.Fragment,{children:["       ",(0,k.jsx)(I.Z,{md:9,children:(0,k.jsx)(U.Z,{for:"lblPropertyName",children:"We're Closed "})})]}):(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(I.Z,{md:9,children:(0,k.jsxs)(U.Z,{for:"lblPropertyName",children:[" ",g(Z,2,1)," - ",g(Z,2,2)," "]})})})]}),(0,k.jsxs)(F.Z,{children:[(0,k.jsx)(I.Z,{md:3,children:(0,k.jsx)(U.Z,{style:{textAlign:"right"},for:"lblPropertyName",children:"Thursday:"})}),!0===g(Z,3,3)?(0,k.jsxs)(k.Fragment,{children:["       ",(0,k.jsx)(I.Z,{md:9,children:(0,k.jsx)(U.Z,{for:"lblPropertyName",children:"We're Closed "})})]}):(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(I.Z,{md:9,children:(0,k.jsxs)(U.Z,{for:"lblPropertyName",children:[" ",g(Z,3,1)," - ",g(Z,3,2)," "]})})})]}),(0,k.jsxs)(F.Z,{children:[(0,k.jsx)(I.Z,{md:3,children:(0,k.jsx)(U.Z,{style:{textAlign:"right"},for:"lblPropertyName",children:"Friday:"})}),!0===g(Z,4,3)?(0,k.jsxs)(k.Fragment,{children:["       ",(0,k.jsx)(I.Z,{md:9,children:(0,k.jsx)(U.Z,{for:"lblPropertyName",children:"We're Closed "})})]}):(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(I.Z,{md:9,children:(0,k.jsxs)(U.Z,{for:"lblPropertyName",children:[" ",g(Z,4,1)," - ",g(Z,4,2)," "]})})})]}),(0,k.jsxs)(F.Z,{children:[(0,k.jsx)(I.Z,{md:3,children:(0,k.jsx)(U.Z,{style:{textAlign:"right"},for:"lblPropertyName",children:"Saturday:"})}),!0===g(Z,5,3)?(0,k.jsxs)(k.Fragment,{children:["       ",(0,k.jsx)(I.Z,{md:9,children:(0,k.jsx)(U.Z,{for:"lblPropertyName",children:"We're Closed "})})]}):(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(I.Z,{md:9,children:(0,k.jsxs)(U.Z,{for:"lblPropertyName",children:[" ",g(Z,5,1)," - ",g(Z,5,2)," "]})})})]}),(0,k.jsxs)(F.Z,{children:[(0,k.jsx)(I.Z,{md:3,children:(0,k.jsx)(U.Z,{style:{textAlign:"right"},for:"lblPropertyName",children:"Sunday:"})}),1==g(Z,6,3)?(0,k.jsxs)(k.Fragment,{children:["       ",(0,k.jsx)(I.Z,{md:9,children:(0,k.jsx)(U.Z,{for:"lblPropertyName",children:"We're Closed "})})]}):(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(I.Z,{md:9,children:(0,k.jsxs)(U.Z,{for:"lblPropertyName",children:[" ",g(Z,6,1)," - ",g(Z,6,2)," "]})})})]})]})})}),(0,k.jsxs)(F.Z,{children:[null===l||void 0===l||o.ownerMobileNumber!==l.mobileNumber&&o.owner_mobile_number!==l.mobileNumber?(0,k.jsx)(I.Z,{children:"1"===o.connected?(0,k.jsx)(B.Z,{color:"success",block:!0,onClick:function(){return function(){var e={merchant_property_id:o.id};r((0,w.Ti)(e)).then((function(e){console.log("disconnect .."+JSON.stringify(e)),n.showBusinessInfo=!1;var t=n.fncCallback;r((0,re.el)()),null!==t&&(console.log("..should trigger call back"),t())})).catch((function(e){}))}()},children:"DisConnect"}):(0,k.jsx)(B.Z,{color:"success",block:!0,onClick:function(){return function(){if(null!==l&&void 0!==l){var e={merchant_property_id:o.id};r((0,w.v_)(e)).then((function(e){n.showBusinessInfo=!1,r((0,re.el)());var t=n.fncCallback;null!==t&&(console.log("..should trigger call back"),t())})).catch((function(e){console.log("...save connection error")}))}else n.connectToMerchantId=o.id,console.log("..start to connect to merchant.."+o.id),r((0,W.ZF)({address:{postalCode:"",streetNumber:"",route:"",locality:"",city:"",country:""},active:!0}))}()},children:"Connect"})}):null,(0,k.jsx)(I.Z,{children:(0,k.jsx)(B.Z,{className:"mt-1 mb-5",color:"danger",block:!0,onClick:function(){n.showBusinessInfo=!1,r((0,re.el)())},children:"Cancel"})})]}),null===l||void 0===l||o.ownerMobileNumber!==l.mobileNumber&&o.owner_mobile_number!==l.mobileNumber?null:(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(I.Z,{children:["Share your business ",(0,k.jsx)("br",{}),(0,k.jsxs)(ve.Z,{url:b,quote:v,children:[" ",(0,k.jsx)(Fe.Z,{size:32,round:!0})]}),"     ",(0,k.jsx)(Ne.Z,{url:b,title:v,children:(0,k.jsx)(Ie.Z,{size:32,round:!0})}),(0,k.jsx)(ke.Z,{url:b,title:v,separator:":: ",children:(0,k.jsx)(Be.Z,{size:32,round:!0})}),(0,k.jsx)(Ce.Z,{url:b,children:(0,k.jsx)(Ae.Z,{size:32,round:!0})}),(0,k.jsx)(we.Z,{url:String(window.location),children:(0,k.jsx)(Oe.Z,{size:32,round:!0})}),(0,k.jsx)(Se.Z,{url:b,title:v,windowWidth:660,windowHeight:460,children:(0,k.jsx)(_e.Z,{size:32,round:!0})}),(0,k.jsx)(Pe.Z,{url:b,subject:v,body:"body",children:(0,k.jsx)(De.Z,{size:32,round:!0})}),(0,k.jsx)(Te.Z,{url:b,title:v,children:(0,k.jsx)(Ee.Z,{size:32,round:!0})}),(0,k.jsx)(Me.Z,{url:b,title:v,children:(0,k.jsx)(ze.Z,{size:32,round:!0})})]})})]})};b().accessToken="pk.eyJ1IjoieWt1cnNhdCIsImEiOiJjam9rMmFrZGkwMmpjM3F0b3huZ2hkM2VnIn0.tuCDaZM6aIA2KQZbtucKpQ";var Re=function(e){(0,j.Z)(r,e);var n=(0,Z.Z)(r);function r(){var e;(0,x.Z)(this,r);for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return(e=n.call.apply(n,[this].concat(i))).state={pins:[],mapInitialized:!1,searchText:"",selectedAddress:null,email:"",properties:[],changeColor:!1,layerAdded:[],draw:null,drawedBefore:!1,drawing:!1,selectedProperties:[],feature:null,selectedPropertyEmail:[],satelliteMode:!1,showMapLegend:!1,showBusinessInfo:!1},e.renderPropertiesTooltip=function(n){var r=n.id,t=n.email,i=n.property,s=e.props.utilsData,o=e.props.auth.user;if(!i.is_business||!0!==i.is_business)return(0,k.jsx)(A,{email:t,id:r,property:i,cb:e.removeProperty,changeColor:e.changeColor,editMode:s.editMode,cbBinding:e.bindingProperty,cbSendEmail:e.cbSendEmail,cbBusiness:e.cbBusiness,user:o,cbBusinessInfo:e.cbBusinessInfo});s.selectedProperty=i,s.showBusinessInfo=!0,e.setState({showBusinessInfo:!0})},e.cbSendEmail=function(n,r){var t=e.props.utilsData;t.drawFinished=!0;var i=[];i.push({properties:r}),t.selectedProperty=i,e.setState({selectedProperties:i})},e.changeColor=function(){var n=(0,p.Z)((0,m.Z)().mark((function n(r){var t;return(0,m.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(t=e.props.utilsData).changeColor=!0,t.emailForChangeColor=r,console.log("....setting utilsData.changeColor....."+r),e.setState({changeColor:!0});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e.cbBusiness=function(){var n=(0,p.Z)((0,m.Z)().mark((function n(r,t){return(0,m.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.props.history.push("/business-profile?id="+t.id);case 2:case"end":return n.stop()}}),n)})));return function(e,r){return n.apply(this,arguments)}}(),e.cbBusinessInfo=function(){var n=(0,p.Z)((0,m.Z)().mark((function n(r,t){var i;return(0,m.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=e.props.utilsData,e.props.auth,i.selectedProperty=t,i.showBusinessInfo=!0,i.fncCallback=e.cbBusinessInfoCallBack,e.setState({showBusinessInfo:!0});case 6:case"end":return n.stop()}}),n)})));return function(e,r){return n.apply(this,arguments)}}(),e.cbBusinessInfoCallBack=function(){console.log("...call back function works..."),e.redrawMap()},e.bindingProperty=function(){var n=(0,p.Z)((0,m.Z)().mark((function n(r,t){var i;return(0,m.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=e.props.utilsData,t&&t.is_business&&(1===t.is_business||!0===t.is_business)?(i.selectedProperty=t,i.showBusinessInfo=!0,i.fncCallback=e.cbBusinessInfoCallBack,e.setState({showBusinessInfo:!0})):(console.log("..binding property.."+JSON.stringify(t)),i.bindingProperty=!0,i.emailForChangeColor=r,i.selectedProperty=t,i.fncCallback=e.cbBusinessInfoCallBack,console.log("....setting utilsData.bindingProperty....."+r),e.setState({bindingProperty:!0}));case 2:case"end":return n.stop()}}),n)})));return function(e,r){return n.apply(this,arguments)}}(),e.bindingBusiness=function(e){},e.redrawMap=(0,p.Z)((0,m.Z)().mark((function n(){var r,t,i,s,o,l,a,c,d,u,h;return(0,m.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(r=e.context.map)&&((0,S.MB)(r),(0,S.if)(r),(0,S.Yh)(r),r.removeLayer("area"),r.removeSource("area")),t=new(ge())({controls:{point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1}}),i=e.props.loadConnected,n.next=6,i();case 6:s=n.sent,o=s.value,l=(0,P.convertLocation)(o.value);try{if(e.state.pins.map((function(e){e.marker.remove()})),e.setState({properties:l.map((function(e){return{type:"Feature",properties:e,geometry:{type:"Point",coordinates:[e.location.longitude,e.location.latitude]}}})),draw:t}),r.addSource("area",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),r.addLayer({id:"area",type:"fill",source:"area",layout:{},paint:{"fill-color":"#088","fill-opacity":.8}}),(a=document.getElementsByClassName("mapboxgl-popup")).length)for(c=a.length,d=c-1;d>=0;d--){console.log("...remove popup box i= .."+d);try{a[d]&&a[d].remove()}catch(m){console.log("..remove popup error..")}}u=e.props.auth,null!==(h=u.user)&&void 0!==h?((0,S.gU)(r,l,e.renderPropertiesTooltip,!1,h),(0,S.Q7)(r,l,h)):(0,S.gU)(r,l,e.renderPropertiesTooltip,!1,h)}catch(p){}case 10:case"end":return n.stop()}}),n)}))),e.changeColorCallack=function(){var n=(0,p.Z)((0,m.Z)().mark((function n(r,t,i){var s,o,l,a,c,d,p,x;return(0,m.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r?e.redrawMap():(s=e.state.pins,o=s.filter((function(e){return e.email.split("@")[0]===i.split("@")[0]})),l=s.filter((function(e){return e.email.split("@")[0]!==i.split("@")[0]})),console.log("..others pin.."+l.length+"..current pin.."+o.length+" email="+i+" color="+t),o&&o.length>0&&(a=e.context.map,o[0].marker.remove(),c=document.createElement("div"),48,48,c.className="marker",d="map-markers/blue_home_pin.png","default"===t&&(d="/map-markers/blue_home_pin.png"),"hasInjured"===t&&(d="/map-markers/red_home_pin.png"),"pending"===t&&(d="/map-markers/grey_home_pin.png"),"safe"===t&&(d="/map-markers/green_home_pin.png"),"secondary"===t&&(d="/map-markers/second_home_pin.png"),console.log("..change color.."+d),c.style.backgroundImage="url("+d+")",c.style.width="".concat(48,"px"),c.style.height="".concat(48,"px"),c.style.backgroundSize="100%",(p=new(b().Marker)(c).setPopup(new(b().Popup)({closeOnClick:!0,closeButton:!0,maxWidth:"none"}).setHTML("<h1>No address</h1>"))).setLngLat([o[0].geocodeData.longitude,o[0].geocodeData.latitude]),p.addTo(a),x=document.createElement("div"),de.render((0,k.jsxs)("div",{className:"info-window",children:[(0,k.jsx)("h4",{children:i}),(0,k.jsx)(F.Z,{className:"justify-content-end ",children:(0,k.jsx)(I.Z,{className:"list-unstyled text-right",children:(0,k.jsxs)("li",{children:[(0,k.jsx)(B.Z,{size:"sm",onClick:function(){return e.bindingProperty(i)},children:"Info"})," \xa0\xa0\xa0\xa0",(0,k.jsx)(B.Z,{size:"sm",onClick:function(){return e.addAddress()},children:"Add"})," \xa0\xa0\xa0\xa0",(0,k.jsx)(B.Z,{size:"sm",onClick:function(){return e.removeAddress(i)},children:"Remove"})," \xa0\xa0\xa0\xa0"]})})})]}),x),p.getPopup().setDOMContent(x),e.setState((function(e){return(0,h.Z)((0,h.Z)({},e),{},{pins:[].concat((0,u.Z)(l),[{marker:p,email:o[0].email,geocodeData:o[0].geocodeData,color:t}])})}))));case 1:case"end":return n.stop()}}),n)})));return function(e,r,t){return n.apply(this,arguments)}}(),e.removeProperty=function(){var n=(0,p.Z)((0,m.Z)().mark((function n(r,t){var i,s,o,l,a,c,d,u,h,p,x,g;return(0,m.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("..remove this property.."+r),i=r.split("@")[0],s=e.state.properties,o=s.filter((function(e){return e.properties.email.split("@")[0]!==i})),l=s.filter((function(e){return e.properties.email.split("@")[0]===i})),!t){n.next=9;break}return e.props.history.push("/edit-property"),n.abrupt("return");case 9:if(console.log("..to be remove.."+JSON.stringify(l)),a=e.props.deleteUserAdditionalAddressById,!(l&&l.length>0)){n.next=15;break}return n.next=14,a(l[0].properties.id);case 14:n.sent;case 15:c=e.context.map;try{if((d=document.getElementsByClassName("mapboxgl-popup")).length)for(u=d.length,h=u-1;h>=0;h--){console.log("...remove popup box i= .."+h);try{d[h]&&d[h].remove()}catch(m){console.log("..remove popup error..")}}console.log("...remove map..."),c&&((0,S.MB)(c),(0,S.if)(c),(0,S.Yh)(c)),e.setState({properties:o}),console.log("...redraw the map after remove property..."),p=(0,P.convertGeoProperty)(o),x=e.props.auth,g=x.user,(0,S.gU)(c,p,e.renderPropertiesTooltip,!1,g),(0,S.Q7)(c,p,g)}catch(f){console.log("...remove property error..."+JSON.stringify(f))}case 17:case"end":return n.stop()}}),n)})));return function(e,r){return n.apply(this,arguments)}}(),e.onClickMap=function(n){var r=n.lngLat,t=r.lng,i=r.lat,s=e.props,o=s.utilsData,l=s.auth.user;o.editMode?(console.log("..in edit mode.."),e.createMarker({latitude:i,longitude:t})):null===l||void 0==l?e.createMarker({latitude:i,longitude:t}):console.log(".. editMode turn off..")},e.createMarker=function(){var n=(0,p.Z)((0,m.Z)().mark((function n(r){var t,i,s,o,l,a,c,d,p,x,g;return(0,m.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=r.latitude,i=r.longitude,s=e.context.map,o=document.createElement("div"),48,48,o.className="marker",o.style.backgroundImage="url(https://alphcmap.com/map-markers/blue_home_pin.png)",o.style.width="".concat(48,"px"),o.style.height="".concat(48,"px"),o.style.backgroundSize="100%",(l=new(b().Marker)(o).setPopup(new(b().Popup)({closeOnClick:!0,closeButton:!0,maxWidth:"none"}).setHTML("<h1>No address</h1>"))).setLngLat([i,t]),l.addTo(s),l.on("dragend",e.onDragMarker),l.on("click",(function(){return l.togglePopup()})),n.next=17,(0,T.bu)({longitude:i,latitude:t});case 17:a=n.sent,void 0!==(c=localStorage.getItem("current_domain"))&&null!==c||(c="alphc.com"),d=(0,T.Jk)(a)+"@"+c,e.setState({selectedAddress:a,email:d}),p=e.props.auth,x=document.createElement("div"),null!==p.user&&void 0!==p.user?de.render((0,k.jsxs)("div",{className:"info-window",children:[(0,k.jsx)("h4",{children:d}),(0,k.jsx)(F.Z,{className:"justify-content-end ",children:(0,k.jsx)(I.Z,{className:"list-unstyled text-right",children:(0,k.jsxs)("li",{children:[(0,k.jsx)(B.Z,{size:"sm",onClick:function(){return e.addAddress()},children:"Add"})," \xa0\xa0\xa0\xa0",(0,k.jsx)(B.Z,{size:"sm",onClick:function(){return e.removeAddress(d)},children:"Remove"})," \xa0\xa0\xa0\xa0"]})})})]}),x):de.render((0,k.jsxs)("div",{className:"info-window",children:[(0,k.jsx)("h4",{children:d}),(0,k.jsx)(F.Z,{className:"justify-content-end ",children:(0,k.jsx)(I.Z,{className:"list-unstyled text-right",children:(0,k.jsx)("li",{children:(0,k.jsx)(B.Z,{size:"sm",onClick:function(){return e.activateAddress()},children:"Activate this address"})})})})]}),x),l.getPopup().setDOMContent(x),l.togglePopup(),g=e.state.pins,null!==p.user&&void 0!==p.user?(g.forEach((function(e){e.marker.getPopup().isOpen()&&e.marker.togglePopup()})),e.setState((function(e){return(0,h.Z)((0,h.Z)({},e),{},{pins:[].concat((0,u.Z)(g),[{marker:l,email:d,geocodeData:a,color:"default"}])})}))):(g.forEach((function(e){e.marker.getPopup().isOpen()&&e.marker.togglePopup(),e.marker.remove()})),e.setState((function(e){return(0,h.Z)((0,h.Z)({},e),{},{pins:[{marker:l,email:d,geocodeData:a}]})})));case 29:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e.removeAddress=function(n){var r=e.state.pins;r.filter((function(e){return e.email===n}))[0].marker.remove();var t=r.filter((function(e){return e.email!==n}));e.setState((function(e){return(0,h.Z)((0,h.Z)({},e),{},{pins:t})}));var i=e.state.layerAdded.filter((function(e){return e.email===n})),s=e.context.map;i&&i.length>0&&(0,S.cu)(s,i[0].layerId)},e.addAddress=function(){var n=e.state,r=n.selectedAddress,t=n.email,i=n.properties,s=n.pins,o=n.layerAdded,l=e.context.map,a=s.filter((function(e){return e.email===t})),c={item:(0,h.Z)((0,h.Z)({email:t},r),{},{color:a[0].color})},d={type:"Feature",properties:(0,h.Z)((0,h.Z)({email:t},r),{},{color:a[0].color}),geometry:{type:"Point",coordinates:[r.location.longitude,r.location.latitude]}},u=e.props.saveBatchProperties;i.push(d),u(c).then(function(){var n=(0,p.Z)((0,m.Z)().mark((function n(s){var c,d,u,h,p;return(0,m.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log("..saveBatchProperties.."+JSON.stringify(s)),a&&(c=document.createElement("div"),de.render((0,k.jsxs)("div",{className:"info-window",children:[(0,k.jsx)("h4",{children:t}),(0,k.jsx)(F.Z,{className:"justify-content-end ",children:(0,k.jsx)(I.Z,{className:"list-unstyled text-right",children:(0,k.jsxs)("li",{children:[(0,k.jsx)(B.Z,{size:"sm",onClick:function(){return e.bindingProperty(t)},children:"Info"}),"\xa0\xa0\xa0\xa0",(0,k.jsx)(B.Z,{size:"sm",onClick:function(){return e.removeAddress(t)},children:"Remove"})," \xa0\xa0\xa0\xa0"]})})})]}),c),a[0].marker.getPopup().setDOMContent(c),a[0].marker.getPopup().isOpen()&&a[0].marker.togglePopup()),d=i.filter((function(e){return!0===e.properties.primaryAddress})),(u=[]).push(r),h=(0,P.generateString)(10),p={email:t,layerId:h},o.push(p),e.setState({layerAdded:o,properties:i}),(0,S.ax)(l,ue.kM.user.injured,h,u,(function(e){return[[d[0].properties.location.longitude,d[0].properties.location.latitude],[e.location.longitude,e.location.latitude]]}));case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())},e.activateAddress=function(){var n=e.props,r=n.setPropertyRegistrationForm,t=n.registerForm,i=e.state.selectedAddress;console.log("..selectedAddress.."+JSON.stringify(i));(0,f.Z)(e);t.address=i,r({address:i,active:!0}),e.setState({address:i})},e.onDragMarker=function(){var n=(0,p.Z)((0,m.Z)().mark((function n(r){var t,i,s,o,l,a,c,d,p,x,g;return(0,m.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(t=e.state.pins).forEach((function(e){e.marker.getPopup().isOpen()&&e.marker.togglePopup()})),i=r.target.getLngLat(),s=i.lng,o=i.lat,n.next=5,(0,T.bu)({longitude:s,latitude:o});case 5:l=n.sent,void 0!==(a=localStorage.getItem("current_domain"))&&null!==a||(a="alphc.com"),c=(0,T.Jk)(l)+"@"+a,e.setState({selectedAddress:l,email:c}),d=t.map((function(e){return e.marker===r.target})).indexOf(!0),p=t[d].marker,x=e.props.auth,g=document.createElement("div"),null!==x.user&&void 0!==x.user?de.render((0,k.jsxs)("div",{className:"info-window",children:[(0,k.jsxs)("h4",{children:[c,"@alphc.com"]}),(0,k.jsx)(F.Z,{className:"justify-content-end ",children:(0,k.jsx)(I.Z,{className:"list-unstyled text-right",children:(0,k.jsxs)("li",{children:[(0,k.jsx)(B.Z,{size:"sm",onClick:function(){return e.removeAddress(c)},children:"Remove"})," \xa0\xa0\xa0\xa0",(0,k.jsx)(B.Z,{size:"sm",onClick:function(){return e.addAddress()},children:"Add"})]})})})]}),g):de.render((0,k.jsxs)("div",{className:"info-window",children:[(0,k.jsxs)("h4",{children:[c,"@alphc.com"]}),(0,k.jsx)(F.Z,{className:"justify-content-end ",children:(0,k.jsx)(I.Z,{className:"list-unstyled text-right",children:(0,k.jsx)("li",{children:(0,k.jsx)(B.Z,{size:"sm",onClick:function(){return e.activateAddress()},children:"Activate this address"})})})})]}),g),p.getPopup().setDOMContent(g),p.togglePopup(),e.setState((function(e){return(0,h.Z)((0,h.Z)({},e),{},{pins:[].concat((0,u.Z)(t.slice(0,d)),[{marker:p,email:c}],(0,u.Z)(t.slice(d+1,t.length)))})}));case 18:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e.onSubmitSearch=function(n){n.preventDefault();var r=e.state.searchText;r.trim()&&(0,T.gA)({address:r}).then((function(n){var r=e.context.map;n&&(e.createMarker({latitude:n.latitude,longitude:n.longitude}),r.flyTo({center:[n.longitude,n.latitude]}))}))},e.onChangeSearchText=function(n){e.setState({searchText:n.currentTarget.value})},e.toggleSatelliteMode=function(n){var r=e.state.satelliteMode,t=e.context.map;r?t.setStyle("mapbox://styles/mapbox/streets-v12"):t.setStyle("mapbox://styles/mapbox/satellite-streets-v12"),e.setState({satelliteMode:!r}),e.redrawMap()},e.toggleDrawing=function(n){var r=e.state,t=r.drawing,i=r.draw,s=r.selectedProperties,o=(r.feature,r.properties);console.log("...toggleDrawing...");var l=e.context.map,a=e.props.utilsData;if(a.drawing=!t,t){var c=i.getAll();try{l.getSource("area").setData(c)}catch(n){}var d=o.filter((function(e){return(0,fe.Z)(e,c.features[0])})),u=[];s.map((function(e){var n={Email:e.properties.email};u.push(n)})),console.log(" end drawing 1="+JSON.stringify(d)+" 2="+JSON.stringify(u)),a.drawFinished=!0,a.selectedProperty=d,e.setState({drawing:!t,selectedProperties:d,selectedPropertyEmail:u,feature:c.features[0]}),l.removeControl(i)}else try{l.addControl(i,"top-left"),i.changeMode(i.modes.DRAW_POLYGON),l.getSource("area").setData({type:"FeatureCollection",features:[]}),e.setState({drawing:!t,selectedProperties:[],feature:null,selectedPropertyEmail:[]})}catch(n){}},e.toggleShowMapLegend=function(n){var r=e.state.showMapLegend;e.setState({showMapLegend:!r})},e.PropertyMarkerDescriptions=[{marker:ue.kM.property.default,description:"Add your Address Makers based on need and requirements"},{marker:ue.kM.property.hasInjured,description:"Add your Address Makers based on need and requirements"},{marker:ue.kM.property.pending,description:"Add your Address Makers based on need and requirements"},{marker:ue.kM.property.safe,description:"Add your Address Makers based on need and requirements"}],e}return(0,g.Z)(r,[{key:"componentDidUpdate",value:function(e,n,r){var t=this.context.map;!this.state.mapInitialized&&t&&(this.initializeLayers(),this.setState({mapInitialized:!0}))}},{key:"componentWillUnmount",value:function(){var e=this.context.map;try{e&&((0,S.MB)(e),(0,S.if)(e),(0,S.Yh)(e),e.removeLayer("area"),e.removeSource("area"))}catch(n){console.log("..componment unmount error")}}},{key:"initializeLayers",value:function(){var e=(0,p.Z)((0,m.Z)().mark((function e(){var n,r,t,i,s,o,l,a,c,d,u,h;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.context.map,r=this.props,t=r.loadConnected,i=r.loadBusinessAddress,s=new(ge())({controls:{point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1}}),o=this.props.auth,l=o.user,a=[],null!==l&&void 0!==l){e.next=14;break}return e.next=9,i();case 9:c=e.sent,d=c.value,a=(0,P.convertLocation)(d.propertyInfo),e.next=19;break;case 14:return e.next=16,t();case 16:u=e.sent,h=u.value,a=(0,P.convertLocation)(h.value);case 19:try{this.setState({properties:a.map((function(e){return{type:"Feature",properties:e,geometry:{type:"Point",coordinates:[e.location.longitude,e.location.latitude]}}})),draw:s}),n.addSource("area",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),n.addLayer({id:"area",type:"fill",source:"area",layout:{},paint:{"fill-color":"#088","fill-opacity":.8}}),null===l||void 0===l?(0,S.gU)(n,a,this.renderPropertiesTooltip,!0,null):((0,S.gU)(n,a,this.renderPropertiesTooltip,!0,l),(0,S.Q7)(n,a,l))}catch(m){console.log("init map layer error:"+JSON.stringify(m))}case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,n=this.state,r=(n.pins,n.searchText),t=n.drawing,i=n.satelliteMode,s=n.showMapLegend,o=this.props,l=o.utilsData,a=o.active,c=(o.editMode,o.auth.user),d=!0,u=(0,P.getLoginType)();return null!==c&&void 0!==c||(d=!1),l.editMode&&(d=!1),l.changeColor&&(d=!1),l.bindingProperty&&(d=!1),l.drawFinished&&(d=!1),l.showBusinessInfo&&(d=!1),l.connectToMerchantId>0&&(d=!1),s&&(d=!1),1===parseInt(u)&&(d=!1),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:"showcase-map-top-actions",children:(0,k.jsx)("div",{className:"search-actions",children:null!==c&&void 0!==c&&1===parseInt(u)?null:(0,k.jsx)(z.Z,{onSubmit:this.onSubmitSearch,children:(0,k.jsx)(L.Z,{bsSize:"lg",disabled:!l.editMode&&null!==c&&void 0!==c,className:"",value:r,onChange:this.onChangeSearchText,placeholder:"Search..."})})})}),d?i?null:t?(0,k.jsx)("i",{title:"End Drawing",onClick:function(n){return e.toggleDrawing(n)},className:"draw-button fa-2x fa-solid fa-arrow-pointer"}):(0,k.jsx)("i",{title:"Pan, Draw, Connect, Addresses boundary and identify area to Send Email",onClick:function(n){return e.toggleDrawing(n)},className:"draw-button fa-2x fa-solid fa-draw-polygon"}):null,d?i?(0,k.jsx)("i",{onClick:function(n){return e.toggleSatelliteMode(n)},className:"satellite-button red-color fa-2x fa-solid fa-globe"}):(0,k.jsx)("i",{onClick:function(n){return e.toggleSatelliteMode(n)},className:"satellite-button fa-2x fa-solid fa-satellite"}):null,d?!s&&(0,k.jsx)(k.Fragment,{children:(0,k.jsx)("i",{className:"mapLegend-button  close-button fa-3x fa fa-question",onClick:function(n){return e.toggleShowMapLegend(n)}})}):null,s&&(0,k.jsxs)("div",{className:"map-legend_content",children:[(0,k.jsx)("i",{className:"mapLegend-button-close  fa fa-3x fa-close",onClick:function(n){return e.toggleShowMapLegend(n)}}),(0,k.jsx)("b",{children:"Address Markers"}),(0,k.jsxs)("table",{children:[" ",(0,k.jsx)("tr",{children:this.PropertyMarkerDescriptions.map((function(e){var n=e.marker,r=e.description;return(0,k.jsxs)("td",{children:[(0,k.jsx)("img",{alt:r,src:n,height:40})," \xa0\xa0"]})}))}),(0,k.jsx)("tr",{children:(0,k.jsxs)("td",{colSpan:this.PropertyMarkerDescriptions.length,children:[(0,k.jsx)("hr",{}),this.PropertyMarkerDescriptions[0].description,(0,k.jsx)("hr",{})]})})]}),(0,k.jsx)("b",{children:"Tools Bar"}),(0,k.jsxs)("table",{children:[(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{children:(0,k.jsx)("i",{className:"fa-2x fa-solid fa-draw-polygon"})}),(0,k.jsxs)("td",{children:["Pan, Draw, Connect, Addresses boundary and identify area to Send Email",(0,k.jsx)("hr",{})]})]}),(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{children:(0,k.jsx)("i",{className:"fa-2x fa-solid fa-arrow-pointer"})}),(0,k.jsxs)("td",{children:["Send Email to identified Opt-in Addresses",(0,k.jsx)("hr",{})]})]}),(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{children:(0,k.jsx)("i",{className:"fa-2x fa-solid fa-satellite"})}),(0,k.jsxs)("td",{children:["Satellite Mode",(0,k.jsx)("hr",{})]})]}),(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{children:(0,k.jsx)("i",{className:"fa-2x fa-solid fa-globe"})}),(0,k.jsx)("td",{children:"Map Mode"})]})]})]}),(0,k.jsx)(C,{}),a&&(0,k.jsx)(ce,{}),l.changeColor&&(0,k.jsx)(he,{callback:this.changeColorCallack}),l.bindingProperty&&(0,k.jsx)(pe,{}),l.drawFinished&&(0,k.jsx)(ye,{}),l.showBusinessInfo&&(0,k.jsx)(Le,{}),l.connectToMerchantId>0&&(0,k.jsx)(ce,{})]})}}]),r}(i.Component);Re.contextType=v.ZP;var Ue=(0,s.connect)((function(e){return{auth:e.auth,registerForm:e.registerForm,active:e.registerForm.active,utilsData:e.utilsData,editMode:e.utilsData.editMode}}),(function(e){return{loadBusinessAddress:function(){return e((0,w.f1)())},loadConnected:function(n){return e((0,w.Y5)(n))},fetchUsers:function(){return e((0,w.uh)({page:1,pageSize:1e5}))},setPropertyRegistrationForm:function(n){return e((0,W.ZF)(n))},saveBatchProperties:function(n){return e((0,re.ES)(n))},deleteUserAdditionalAddressById:function(n){return e((0,re.F$)(n))}}}))((0,o.EN)(Re)),Je=function(){return(0,k.jsxs)("div",{className:"full-screen splash-screen isLoading",children:[(0,k.jsx)("img",{className:"splash-image",src:"/assets/img/logo-alphc.png",alt:"logo"}),(0,k.jsx)("h1",{className:"splash-text",children:"INFINITE POSSIBILITIES"})]})},Ve=function(){var e=(0,o.TH)().pathname,n=(0,i.useState)(""),r=(0,t.Z)(n,2),u=r[0],h=r[1],m=(0,i.useState)(null),p=(0,t.Z)(m,2),x=p[0],g=p[1];(0,i.useEffect)((function(){if("/"===e){h(e);var n=setTimeout((function(){h("_showcase")}),1500);g(n)}else clearTimeout(x),g(null),h(e)}),[e]);(0,s.useSelector)((function(e){return e.auth.me}));return(0,k.jsx)(d.Z,{children:(0,k.jsxs)(l.Z,{activeTab:u,className:"home-tab-content",children:[(0,k.jsx)(a.Z,{tabId:"_showcase",className:"",children:(0,k.jsx)(c.Z,{children:"_showcase"===u&&(0,k.jsx)(Ue,{})})}),(0,k.jsx)(a.Z,{tabId:"/",className:"",children:(0,k.jsx)(Je,{})})]})})}}}]);
//# sourceMappingURL=536.2fce48bc.chunk.js.map