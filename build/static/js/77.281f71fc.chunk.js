"use strict";(self.webpackChunkproperty_manage_system_web=self.webpackChunkproperty_manage_system_web||[]).push([[77],{68327:function(e,i,n){n.d(i,{c:function(){return bi}});var a=n(52642),t=n(80830),r=n(54333),c=n(39101),l=n(10098),s=n(22987),o=n(48096),d=n(57413),u=n(37128),m=n(38621),p=n(12025),h=n(52383),f=n(21226),b=n(88222),x=n(47555),g=n(38782),v=n(97038),j=n(563),S=n(41479),N=n(34948),C=n(32820),y=n(26652),w=n(69578),P=n(64539),k=n(61462),F=n(76986),_=n(10687),D=n(17412),I=n(81521),U=n(82546),Z=n(57156),B=n(17055),E=n(31143),z=n(14467),A=n(24190),T=n(22655),L=n(99540),J=n(58819),M=n(90014),O=n(1883),G=n(44631),R=n(19415),W=n(58675),q=n(3513),H=n(84620),V=n(69486),$=n(8301),X=n(95676),Y=n(17410),Q=n(20001),K=n(38533),ee=n(42562),ie=n(79041),ne=n(87857),ae=n(7476),te=n(41048),re=n(67577),ce=n(18030),le=n(31017),se=n(35425),oe=n(7600),de=n(82759),ue=n(31493),me=n(5885),pe=n(4031),he=n(38544),fe=n(3078),be=n(7022),xe=n(23359),ge=n(9594),ve=n(48425),je=n(43594),Se=n(77437),Ne=n(49096),Ce=n(73907),ye=n(53666),we=n(79794),Pe=n(77418),ke=n(56931),Fe=n(14799),_e=n(22414),De=n(66619),Ie=n(19467),Ue=n(39228),Ze=n(17954),Be=n(63232),Ee=n(48293),ze=n(71976),Ae=n(39277),Te=n(28865),Le=n(73130),Je=n(63578),Me=n(17769),Oe=n(511),Ge=n(85602),Re=n(79663),We=n(79143),qe=n(91250),He=n(72282),Ve=n(99974),$e=n(65487),Xe=n(39214),Ye=n(52312),Qe=n(74419),Ke=n(66460),ei=n(72337),ii=n(34708),ni=n(19261),ai=n(44430),ti=n(12419),ri=n(75640),ci=n(19033),li=n(22800),si=n(99946),oi=n(62412),di=n(13721),ui=n(71863),mi=n(43525),pi=n(15463),hi=n(66707),fi=n(87898),bi=Object.assign({},{cilAlignCenter:Z.i,cilAlignLeft:B.n,cilAlignRight:E.e,cilApplicationsSettings:z.D,cilArrowRight:A.n,cilArrowTop:T.T,cilAsterisk:L.B,cilBan:J.E,cilBasket:M.o,cilBell:O.$,cilBold:G.t,cilBookmark:R.$,cilCalculator:W.o,cilCalendar:q.J,cilCloudDownload:H.j,cilChartPie:V.M,cilCheck:$.J,cilChevronBottom:X.b,cilChevronLeft:Y.S,cilChevronRight:Q.z,cilChevronTop:K.V,cilCircle:ee.l,cilCheckCircle:ie._,cilCode:ne.I,cilCommentSquare:ae.S,cilCreditCard:te.W,cilCursor:re.t,cilCursorMove:ce.q,cilDrop:le.M,cilDollar:se.T,cilEnvelopeClosed:oe.W,cilEnvelopeLetter:de.v,cilEnvelopeOpen:ue.m,cilEuro:me.z,cilGlobeAlt:pe.e,cilGrid:he.x,cilFile:fe.D,cilFullscreen:be.L,cilFullscreenExit:xe.i,cilGraph:ge.o,cilHome:ve.I,cilInbox:je.s,cilIndentDecrease:Se.t,cilIndentIncrease:Ne.q,cilInputPower:Ce.g,cilItalic:ye.U,cilJustifyCenter:we.h,cilJustifyLeft:Pe.m,cilLaptop:ke.U,cilLayers:Fe.H,cilLightbulb:_e.O,cilList:De.A,cilListNumbered:Ie.N,cilListRich:Ue.f,cilLocationPin:Ze.i,cilLockLocked:Be.U,cilMagnifyingGlass:Ee.M,cilMap:ze.T,cilMoon:Ae.S,cilNotes:Te.E,cilOptions:Le.t,cilPaperclip:Je.y,cilPaperPlane:Me.p,cilPencil:Oe.l,cilPeople:Ge.g,cilPhone:Re.d,cilPrint:We.P,cilPuzzle:qe.Q,cilSave:He.F,cilScrubber:Ve.Z,cilSettings:$e.M,cilShare:Xe.a,cilShareAll:Ye.t,cilShareBoxed:Qe.n,cilShieldAlt:Ke.t,cilSpeech:ei.B,cilSpeedometer:ii.h,cilSpreadsheet:ni.o,cilStar:ai.m,cilSun:ti.O,cilTags:ri.f,cilTask:ci.W,cilTrash:li.N,cilUnderline:si.L,cilUser:oi.E,cilUserFemale:di.Q,cilUserFollow:ui.H,cilUserUnfollow:mi.z,cilX:pi.x,cilXCircle:hi.J,cilWarning:fi.D},{cifUs:k.E,cifBr:F.N,cifIn:_.J,cifFr:D.A,cifEs:I.z,cifPl:U.I},{cibSkype:a.F,cibFacebook:t.t,cibTwitter:r._,cibLinkedin:c.n,cibFlickr:l.r,cibTumblr:s.i,cibXing:o.n,cibGithub:d.G,cibStackoverflow:u.F,cibYoutube:m.N,cibDribbble:p.x,cibInstagram:h.d,cibPinterest:f.p,cibVk:b.o,cibYahoo:x.s,cibBehance:g.n,cibReddit:v.m,cibVimeo:j.R,cibCcMastercard:S.y,cibCcVisa:N.W,cibStripe:C.$,cibPaypal:y.G,cibGooglePay:w.S,cibCcAmex:P.I})},19246:function(e,i,n){n.d(i,{Wm:function(){return f},Jb:function(){return g},Ao:function(){return S},BX:function(){return C}});var a=n(72791),t=n(56994),r=n(42937),c=a.lazy((function(){return Promise.all([n.e(387),n.e(189)]).then(n.bind(n,28189))})),l=a.lazy((function(){return Promise.all([n.e(387),n.e(824)]).then(n.bind(n,21824))})),s=a.lazy((function(){return Promise.all([n.e(387),n.e(88)]).then(n.bind(n,99088))})),o=a.lazy((function(){return Promise.all([n.e(387),n.e(818)]).then(n.bind(n,45818))})),d=a.lazy((function(){return Promise.all([n.e(387),n.e(264)]).then(n.bind(n,12264))})),u=a.lazy((function(){return Promise.all([n.e(387),n.e(569),n.e(452)]).then(n.bind(n,9452))})),m=[{path:"/admin/",exact:!0,name:"Home"},{path:"/admin/users",exact:!0,name:"Users",component:c},{path:"/admin/users/new",exact:!0,name:"New User",component:s},{path:"/admin/users/:id",exact:!0,name:"User Details",component:l},{path:"/admin/edit/user/:id",exact:!0,name:"Edit User",component:s},{path:"/admin/file-upload",exact:!0,name:"FileUpload",component:a.lazy((function(){return Promise.all([n.e(569),n.e(342),n.e(243)]).then(n.bind(n,86243))}))},{path:"/admin/properties",exact:!0,name:"Properties",component:o},{path:"/admin/properties/new",exact:!0,name:"New Property",component:u},{path:"/admin/properties/:id",exact:!0,name:"Property Details",component:d},{path:"/admin/edit/property/:id",exact:!0,name:"Edit Property",component:u},{path:"/admin/properties/:id",exact:!0,name:"User Details",component:l}],p=n(80184),h=(r.Z,function(){return(0,p.jsx)(t.pG,{fixed:!1})}),f=a.memo(h),b=n(60364),x=n(15301),g=function(){var e=(0,b.useDispatch)(),i=(0,b.useSelector)((function(e){return e.admin.sidebarShow}));return(0,p.jsxs)(t.PO,{withSubheader:!0,children:[(0,p.jsx)(t.FP,{inHeader:!0,className:"ml-md-3 d-lg-none",onClick:function(){var n=!![!1,"responsive"].includes(i)||"responsive";e((0,x.YB)(n))}}),(0,p.jsx)(t.FP,{inHeader:!0,className:"ml-3 d-md-down-none",onClick:function(){var n=![!0,"responsive"].includes(i)&&"responsive";e((0,x.YB)(n))}}),(0,p.jsx)(t.qy,{className:"mx-auto d-lg-none",to:"/"}),(0,p.jsx)(t.g3,{className:"d-md-down-none mr-auto"}),(0,p.jsx)(t.g3,{className:"px-3",children:(0,p.jsx)(S,{})}),(0,p.jsx)(t.Mj,{className:"px-3 justify-content-between",children:(0,p.jsx)(t.s_,{className:"border-0 c-subheader-nav m-0 px-0 px-md-3",routes:m})})]})},v=n(16516),j=n(91523),S=function(){return(0,p.jsxs)(t.w5,{inNav:!0,className:"c-header-nav-items mx-2",direction:"down",children:[(0,p.jsx)(t.SQ,{className:"c-header-nav-link",caret:!1,children:(0,p.jsx)("div",{className:"c-avatar",children:(0,p.jsx)(t.sE,{src:"/assets/img/default-user.png",className:"c-avatar-img",style:{backgroundColor:"black"}})})}),(0,p.jsx)(t.$H,{className:"pt-0",placement:"bottom-end",children:(0,p.jsxs)(t.$f,{tag:j.rU,to:"/logout",children:[(0,p.jsx)(v.ZP,{name:"cil-lock-locked",className:"mfe-2"}),"Logout"]})})]})},N=function(){var e=(0,b.useDispatch)(),i=(0,b.useSelector)((function(e){return e.admin.sidebarShow}));return(0,p.jsxs)(t.z3,{show:i,onShowChange:function(i){return e((0,x.YB)(i))},children:[(0,p.jsxs)(t.Dl,{className:"d-md-down-none",to:"/",children:[(0,p.jsx)(t.sE,{className:"c-sidebar-brand-full",src:"/assets/img/logo-sm.png",height:35}),(0,p.jsx)(t.sE,{className:"c-sidebar-brand-minimized",src:"/assets/img/icon-white-small.png",height:35})]}),(0,p.jsx)(t.Xk,{children:(0,p.jsx)(t.gP,{items:[{_tag:"CSidebarNavTitle",_children:["Data"]},{_tag:"CSidebarNavItem",name:"Users",to:"/admin/users",icon:"cil-user"},{_tag:"CSidebarNavItem",name:"Properties",to:"/admin/properties",icon:"cil-home"},{_tag:"CSidebarNavTitle",_children:["Campaigns"]},{_tag:"CSidebarNavItem",name:"Email Campaigns",to:"/admin/email-campaigns",icon:"cil-home"},{_tag:"CSidebarNavItem",name:"Templates",to:"/admin/templates",icon:"cil-home"},{_tag:"CSidebarNavTitle",_children:["Marketing"]},{_tag:"CSidebarNavItem",name:"Coupons",to:"/admin/coupons",icon:"cil-user"},{_tag:"CSidebarNavItem",name:"Flyer",to:"/admin/flyers",icon:"cil-user"},{_tag:"CSidebarNavItem",name:"Promting Events",to:"/admin/events",icon:"cil-user"}],components:{CSidebarNavDivider:t.IE,CSidebarNavDropdown:t.Uu,CSidebarNavItem:t.g$,CSidebarNavTitle:t.Ig}})}),(0,p.jsx)(t.p_,{className:"c-d-md-down-none"})]})},C=a.memo(N)},47569:function(e,i,n){var a=n(74165),t=n(93433),r=n(15861),c=n(29439),l=n(72791),s=n(28958),o=n(15301),d=n(60364),u=n(80184);i.Z=function(e){var i=e.extension,n=(0,l.useState)(void 0),m=(0,c.Z)(n,2),p=m[0],h=m[1],f=(0,l.useState)({val:[]}),b=(0,c.Z)(f,2),x=b[0],g=b[1],v=(0,d.useSelector)((function(e){return e.admin.uploadedFiles})),j=(0,l.useState)([]),S=(0,c.Z)(j,2),N=S[0],C=S[1],y=(0,l.useState)([]),w=(0,c.Z)(y,2),P=(w[0],w[1]),k=(0,l.useRef)(null),F=(0,d.useDispatch)(),_=(0,d.useSelector)((function(e){return e.auth.jwt}));console.log("extension ="+i),(0,l.useEffect)((function(){F((0,o.C7)()).then((function(e){P(e.data)}))}),[]);var D=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(i,n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,t.Z)(k.current.val),console.log("uploading ..file="+JSON.stringify(n)),e.abrupt("return",s.Z.upload(n,_,(function(e){r[i].percentage=Math.round(100*e.loaded/e.total),g({val:r})})).then((function(e){C((function(e){return[].concat((0,t.Z)(e),["Uploaded the file successfully: "+n.name])}));var a={id:e.data[0].id,url:e.data[0].url};v.push(a);var r=Array.from(p);(i+=1)<r.length?(I(500),D(i,r[i])):C((function(e){return[].concat((0,t.Z)(e),["Uploaded Completed!"])}))})).catch((function(e){console.log("upload file error.."+JSON.stringify(e)),r[i].percentage=0,g({val:r}),C((function(e){return[].concat((0,t.Z)(e),["Could not upload the file: "+n.name])}))})));case 3:case"end":return e.stop()}}),e)})));return function(i,n){return e.apply(this,arguments)}}(),I=function(e){return new Promise((function(i){return setTimeout(i,e)}))};return(0,u.jsxs)("div",{children:[x&&x.val.length>0&&x.val.map((function(e,i){return(0,u.jsxs)("div",{className:"mb-2",children:[(0,u.jsx)("span",{children:e.fileName}),(0,u.jsx)("div",{className:"progress",children:(0,u.jsxs)("div",{className:"progress-bar progress-bar-info",role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100",style:{width:e.percentage+"%"},children:[e.percentage,"%"]})})]},i)})),(0,u.jsxs)("div",{className:"row my-3",children:[(0,u.jsx)("div",{className:"col-8",children:(0,u.jsx)("label",{className:"btn btn-default p-0",children:(0,u.jsx)("input",{type:"file",accept:i,multiple:!0,onChange:function(e){h(e.target.files),console.log("file selected.."+JSON.stringify(e.target.files)),g({val:[]})}})})}),(0,u.jsx)("div",{className:"col-4",children:(0,u.jsx)("button",{className:"btn btn-success btn-sm",disabled:!p,onClick:function(e){e.preventDefault();var i=Array.from(p);console.log("files..."+JSON.stringify(i));var n=i.map((function(e){return{percentage:0,fileName:e.name}}));k.current={val:n},D(0,i[0])},children:"Upload"})})]}),N.length>0&&(0,u.jsx)("div",{className:"alert alert-secondary",role:"alert",children:(0,u.jsx)("ul",{children:N.map((function(e,i){return(0,u.jsx)("li",{children:e},i)}))})})]})}},28958:function(e,i,n){n.d(i,{Z:function(){return c}});var a=n(74569),t=n.n(a)().create({headers:{"Content-type":"application/json"}}),r=n(83708),c={upload:function(e,i,n){var a=new FormData;return a.append("files",e),t.post(r.rq+"/upload",a,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(i)},onUploadProgress:n})},getFiles:function(e){return t.get(r.rq+"/upload/files?_limit=10&_start=0&_sort=updatedAt:DESC")}}},26077:function(e,i,n){n.r(i);var a=n(1413),t=n(29439),r=n(56994),c=n(70456),l=n(72791),s=n(60364),o=n(64880),d=n(64064),u=n(15301),m=n(47569),p=n(19246),h=(n(83309),n(68327),n(72426)),f=n.n(h),b=(n(68639),n(80184)),x=d.Ry().shape({description:d.Z_().required("full name is required")});i.default=function(e){var i=e.match,n=(0,s.useDispatch)(),d=(0,o.k6)(),h=(0,s.useSelector)((function(e){return e.auth.me})),g=(new Date,(0,s.useSelector)((function(e){return e.admin.uploadedFiles}))),v=(0,c.TA)({initialValues:{id:i.params.id,description:"",uploadedFiles:[]},validationSchema:x,onSubmit:function(e,a){var t=a.setSubmitting;t(!0),console.log("..uploadedFiles..",g);var r={ownerId:h.id,description:e.description,uploadedFiles:g};n((0,u.UW)(r)).then((function(){i.params.id?d.push("/admin/flyers/".concat(i.params.id)):d.push("/admin/flyers")})).catch((function(){return t(!1)}))}}),j=v.handleChange,S=v.handleBlur,N=v.handleSubmit,C=v.errors,y=v.touched,w=v.values,P=v.isValid,k=v.isSubmitting,F=v.resetForm,_=v.setValues,D=(v.setFieldValue,v.setFieldTouched,(0,l.useState)(!0)),I=(0,t.Z)(D,2);I[0],I[1];(0,l.useEffect)((function(){i.params.id&&n((0,u.KC)(i.params.id)).then((function(e){var i=e.value,n={id:i.data.id,description:i.data.attributes.description};_((0,a.Z)({},n))}))}),[n,h,i.params.id,_]);var U=(0,l.useState)(new Date(f()().add(1,"days").toISOString())),Z=(0,t.Z)(U,2),B=(Z[0],Z[1],(0,l.useState)(new Date(f()().add(30,"days").toISOString()))),E=(0,t.Z)(B,2);E[0],E[1];return(0,b.jsxs)("div",{className:"c-app c-default-layout",children:[(0,b.jsx)(p.BX,{}),(0,b.jsxs)("div",{className:"c-wrapper",children:[(0,b.jsx)(p.Jb,{}),(0,b.jsx)("div",{className:"c-body",children:(0,b.jsx)("main",{className:"c-main",children:(0,b.jsx)(r.KB,{fluid:!0,className:"h-100",children:(0,b.jsx)("div",{className:"content",children:(0,b.jsx)(r.rb,{children:(0,b.jsx)(r.b7,{md:12,children:(0,b.jsx)(r.lx,{onSubmit:N,children:(0,b.jsxs)(r.xH,{children:[(0,b.jsxs)(r.bn,{children:["Flyer id: ",i.params.id]}),(0,b.jsxs)(r.sl,{children:[(0,b.jsx)(r.b7,{xs:"12",children:(0,b.jsxs)(r.We,{children:[(0,b.jsx)(r.cc,{htmlFor:"description",children:"Flyer Description"}),(0,b.jsx)(r.C$,{id:"description",name:"description",onChange:j,onBlur:S,value:w.description,invalid:y.description&&C.description}),(0,b.jsx)(r.ev,{children:C.description})]})}),(0,b.jsxs)(r.b7,{xs:"12",children:[(0,b.jsx)("hr",{}),"Upload Flyers:",(0,b.jsx)(m.Z,{extension:"image/*"})]})]}),(0,b.jsxs)(r.Bt,{className:"text-right",children:[(0,b.jsx)(r.u5,{disabled:!P||k,type:"submit",size:"sm",color:"primary",children:k?(0,b.jsx)(r.LQ,{size:"sm"}):"Submit"})," ",(0,b.jsx)(r.u5,{type:"reset",size:"sm",color:"danger",onClick:function(){return F()},children:"Reset"})]})]})})})})})})})}),(0,b.jsx)(p.Wm,{})]})]})}},68639:function(){},83309:function(){}}]);
//# sourceMappingURL=77.281f71fc.chunk.js.map