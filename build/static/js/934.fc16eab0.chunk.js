"use strict";(self.webpackChunkproperty_manage_system_web=self.webpackChunkproperty_manage_system_web||[]).push([[934],{58031:function(e,t,n){n.d(t,{AN:function(){return a},ES:function(){return g},F$:function(){return l},KK:function(){return f},Nv:function(){return d},SG:function(){return p},b:function(){return c},el:function(){return s},mM:function(){return i},mk:function(){return m},nU:function(){return h},sG:function(){return y},tm:function(){return u}});var o=n(83708),r=(n(5329),n(63872)),i=function(e){return null!=e&&void 0!=e&&(e.tenant=o.ld,console.log("send contact form"+JSON.stringify(e))),function(t){return t({type:r.lZ,payload:fetch("".concat(o.rq,"/contacts/saveContactUs?tenant=").concat(o.ld),{body:JSON.stringify(e),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"}).then((function(e){return e.json()})).then((function(e){return e.statusCode>=300?Promise.reject(e):e}))})}},a=function(e){return function(t,n){var i=n().auth.jwt;return t({type:r.KS,payload:fetch("".concat(o.rq,"/residents/change-property-color"),{body:JSON.stringify(e),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(i)},method:"POST"}).then((function(e){return e.json()})).then((function(e){return e.statusCode>=300?Promise.reject(e):e}))})}},c=function(){return{type:r.Bn}},s=function(){return{type:r.y7}},u=function(){return function(e,t){var n=t().auth.jwt;return e({type:r.IR,payload:fetch("".concat(o.rq,"/residents/delete-account"),{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)},method:"DELETE"}).then((function(e){return e.json()})).then((function(e){return e.statusCode>=300?Promise.reject(e):e}))})}},l=function(e){return console.log("2="+e),function(t,n){var i=n().auth.jwt;return t({type:r.v8,payload:fetch("".concat(o.rq,"/user-properties/delete-user-property-by-id"),{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(i)},body:JSON.stringify({propertyId:e}),method:"POST"}).then((function(e){return e.json()})).then((function(e){return e.statusCode>=300?Promise.reject(e):e}))})}},p=function(){return function(e,t){var n=t().auth.jwt;return e({type:r.K1,payload:fetch("".concat(o.rq,"/residents/property/get"),{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)},method:"GET"}).then((function(e){return e.json()})).then((function(e){return e.statusCode>=300?Promise.reject(e):e}))})}},d=function(e){return function(t,n){var i=n().auth.jwt;return t({type:r.D1,payload:fetch("".concat(o.rq,"/residents/property/save?tenant=").concat(o.ld),{body:JSON.stringify(e),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(i)},method:"POST"}).then((function(e){return e.json()})).then((function(e){return e.statusCode>=300?Promise.reject(e):e}))})}},f=function(){return function(e,t){var n=t().auth.jwt;return e({type:r.Bd,payload:fetch("".concat(o.rq,"/residents/resend-mobile-verification-code?tenant=").concat(o.ld),{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)},method:"POST"}).then((function(e){return e.json()})).then((function(e){return e.statusCode>=300?Promise.reject(e):e}))})}},h=function(){return function(e,t){var n=t().auth.jwt;return e({type:r.ar,payload:fetch("".concat(o.rq,"/residents/resend-email-verification-code?tenant=").concat(o.ld),{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)},method:"POST"}).then((function(e){return e.json()})).then((function(e){return e.statusCode>=300?Promise.reject(e):e}))})}},m=function(){return{type:r.pT}},y=function(e){return function(t,n){var i=n().auth.jwt;return t({type:r.$E,payload:fetch("".concat(o.rq,"/residents/update/self?tenant=").concat(o.ld),{body:JSON.stringify(e),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(i)},method:"PUT"}).then((function(e){return e.json()})).then((function(e){return e.statusCode>=300?Promise.reject(e):e}))})}},g=function(e){return function(t,n){var i=n().auth.jwt;return t({type:r.ud,payload:fetch("".concat(o.rq,"/residents/create-properties"),{body:JSON.stringify(e),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(i)},method:"POST"}).then((function(e){return e.json()})).then((function(e){return e.statusCode>=300?Promise.reject(e):e}))})}}},11027:function(e,t,n){n.d(t,{Cp:function(){return c},TX:function(){return a},jo:function(){return s},pH:function(){return i}});var o=n(83708),r=n(63872),i=(n(83329),function(e,t){return{type:r.C8,payload:fetch("".concat(o.rq,"/public/login?tenant=").concat(o.ld),{body:JSON.stringify({identifier:e,password:t}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"}).then((function(e){return e.json()})).then((function(e){return e.statusCode>=300?Promise.reject(e):e}))}}),a=function(){return{type:r.LQ,payload:new Promise((function(e){return e()}))}},c=function(e){return function(t,n){var i=n().auth.jwt;return console.log("password: ="+e+" token="+i),t({type:r.gH,payload:fetch("".concat(o.rq,"/residents/change-password?tenant=").concat(o.ld),{body:JSON.stringify({password:e}),headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(i)},method:"POST"}).then((function(e){return e.json()})).then((function(e){return e.statusCode>=300?Promise.reject(e):e}))})}},s=function(){return function(e,t){var n=t().auth.jwt;return console.log("..get me..token.."+n),e({type:r.OS,payload:fetch("".concat(o.rq,"/users/me?populate=*"),{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)},method:"GET"}).then((function(e){return e.json()})).then((function(e){return e.statusCode>=300?Promise.reject(e):e}))})}}},35390:function(e,t,n){n.d(t,{Mb:function(){return u},OS:function(){return l},Oi:function(){return a},ZF:function(){return s},a$:function(){return c},s8:function(){return i}});var o=n(83708),r=n(63872),i=function(e){return{type:r.g6,payload:fetch("".concat(o.rq,"/public/verify?tenant=").concat(o.ld),{method:"POST",body:JSON.stringify(e),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e.statusCode>=300?Promise.reject(e):e}))}},a=function(){return{type:r.XP}},c=function(e){return console.log("Do registration, data="+JSON.stringify(e)),{type:r.rN,payload:fetch("".concat(o.rq,"/public/register?tenant=").concat(o.ld),{body:JSON.stringify(e),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"}).then((function(e){return e.json()})).then((function(e){return e.statusCode>=300?Promise.reject(e):(console.log("..register return.."+JSON.stringify(e)),e)}))}},s=function(e){return{type:r.QI,payload:new Promise((function(t){t(e)}))}},u=function(e){return{type:r.$f}},l=function(e){return function(t){return t({type:r.DN,payload:fetch("".concat(o.rq,"/public/is-property-registered?tenant=").concat(o.ld),{method:"POST",body:JSON.stringify({email:e}),headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e.statusCode>=300?Promise.reject(e):e}))})}}},14934:function(e,t,n){n.d(t,{Z:function(){return k}});var o=n(29439),r=n(72791),i=n(60364),a=n(64880),c=n(91523),s=n(9327),u=n(49967),l=n(60554),p=n(37496),d=n(47976),f=n(55146),h=n(13327),m=n(38358),y=n(61599),g=n(20387),j=n(57493),b=n(52919),v=n(80184);var C=function(e){var t=e.text,n=e.size,o=void 0===n?"default":n,r=e.checked,i=e.disabled,a=e.onChange,c=e.offstyle,s=void 0===c?"btn-danger":c,u=e.onstyle,l=r?void 0===u?"btn-success":u:s;return(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("label",{className:"switch_label",children:[(0,v.jsxs)("span",{className:"".concat(o," switch-wrapper"),children:[(0,v.jsx)("input",{type:"checkbox",checked:r,disabled:i,onChange:function(e){return a(e)}}),(0,v.jsx)("span",{className:"".concat(l," switch"),children:(0,v.jsx)("span",{className:"switch-handle"})})]}),(0,v.jsx)("span",{className:"switch-label",children:t})]})})},S=n(35390),N=n(58031),T=n(11027),x=n(36530),w=n(57577),O=n(15301),k=function(){var e=(0,i.useSelector)((function(e){return e.auth.me})),t=(0,a.k6)(),n=(0,r.useState)(!1),k=(0,o.Z)(n,2),P=k[0],A=k[1],I=function(){return A(!1)},Z=(0,r.useState)(!1),D=(0,o.Z)(Z,2),_=D[0],M=D[1],q=(0,i.useSelector)((function(e){return e.utilsData})),J=(0,r.useState)(!1),L=(0,o.Z)(J,2),z=L[0],B=L[1],E=(0,r.useState)(null),F=(0,o.Z)(E,2),R=F[0],G=F[1],K=(0,i.useDispatch)(),U="",$=0;try{[e.firstName,e.lastName].filter((function(e){return e})).join(" ").trim()}catch(Y){}if(null!==e&&void 0!==e&&null!==e.property&&void 0!==e.property){if($=(0,w.getLoginType)(),e.companyName?(U=e.property.email+"@"+e.companyName+".com",localStorage.setItem("current_domain",e.companyName+".com")):e.lastName&&(U=e.property.email+"@"+e.lastName+".com",localStorage.setItem("current_domain",e.lastName+".com")),e.noDelivery&&1===e.noDelivery&&(U=""),2===parseInt($)){var H={id_type:0,id:e.id};K((0,O.NH)(H)).then((function(e){console.log("..get total .."+JSON.stringify(e)),G(e.value.value[0].iCount)})).catch((function(e){}))}}else U="Enter your address to create your account";var Q=(0,r.useCallback)((function(){M(!_)})),X=(0,r.useCallback)((function(){if(q.drawing)x.Rt.error("Error","Drawing addresses boundary, can not switch");else{q.editMode=!z,q.editMode?console.log("...edit mode is enable !!!!.."):console.log("...edit mode is turn off !!!.."),B(q.editMode);var e={utilsData:{editMode:!z}};K((0,S.Mb)(e))}})),W=(0,r.useCallback)((function(){K((0,N.tm)()).then((function(e){var t=e.value;console.log("....delete acount return..."+JSON.stringify(t)),(0,w.clearLoginType)(),"successed"===t.status?K((0,T.TX)()).then((function(){localStorage.removeItem("current_domain"),setTimeout((function(){location.reload(!0)}),500)})):(console.log("error message:"+t.message),x.Rt.error("Error !",t.message))}))}),[K,t]);return(0,v.jsxs)(s.Z,{className:"header fixed-top",color:"light",light:!0,expand:"md",children:[(0,v.jsx)(u.Z,{className:"pixels",href:"mailto:anything@AlphC.com",children:(0,v.jsx)("img",{src:"/assets/img/logo2.png",alt:"logo2"})}),(0,v.jsx)(u.Z,{tag:c.OL,className:"mr-auto",to:"/",children:(0,v.jsx)("img",{src:"/assets/img/logo-alphc.png",alt:"logo"})}),(0,v.jsx)(l.Z,{onClick:function(){return A(!P)},tag:"div",children:(0,v.jsx)("i",{className:"fa fa-bars"})}),(0,v.jsxs)(p.Z,{isOpen:P,navbar:!0,children:[(0,v.jsxs)("div",{style:{width:"64%",textAlign:"center",fontSize:"20px",fontWeight:"bold"},children:[" ",U,"  \xa0\xa0\xa0\xa0\xa0\xa0 ",R?"Connected:"+R:""," "]}),(0,v.jsxs)(d.Z,{className:"ml-auto",navbar:!0,children:[(0,v.jsx)(f.Z,{children:e&&2===parseInt($)?(0,v.jsx)(C,{checked:z,text:"Edit Mode",size:"default",disabled:!1,onChange:X,offstyle:"btn-danger",onstyle:"btn-success"}):null}),(0,v.jsx)(f.Z,{children:(0,v.jsx)(h.Z,{tag:c.OL,onClick:I,to:"/patents",children:"Patents"})}),e?(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(m.Z,{children:(0,v.jsxs)(y.Z,{isOpen:_,toggle:Q,children:[(0,v.jsx)(g.Z,{className:"head-dropdown-toggle",children:"Menu"}),(0,v.jsx)(j.Z,{className:"city-dropdown",children:[{menuText:"Change Address",menuID:1},{menuText:"Change Email",menuID:2},{menuText:"Change Mobile",menuID:3},{menuText:"Change Password",menuID:6},{menuText:"Delete Account",menuID:4},{menuText:"logout",menuID:5}].map((function(e){return(0,v.jsx)(b.Z,{onClick:function(){switch(console.log("selected menu.."+e.menuID),e.menuID){case 1:t.push("/edit-property");break;case 2:t.push("/change-email");break;case 3:t.push("/change-mobile");break;case 4:x.Rt.confirm("Are you sure you want to delete your account? This action is irreversible!",{onOk:W});break;case 5:localStorage.removeItem("current_domain"),(0,w.clearLoginType)(),t.push("/logout");break;case 6:t.push("/change-password")}},children:e.menuText},"key"+e.menuID)}))})]})})}):(0,v.jsx)(f.Z,{children:(0,v.jsx)(h.Z,{tag:c.OL,onClick:I,to:"/login",children:"Login"})})]})]})]})}},5329:function(e,t,n){n.d(t,{MB:function(){return u},Q7:function(){return m},Yh:function(){return p},ax:function(){return d},cu:function(){return h},gU:function(){return s},if:function(){return l}});var o=n(5483),r=n.n(o),i=n(54164),a=n(83708),c=function(e,t,n){var o=e.queryRenderedFeatures(n.point,{layers:["other-properties","safe-properties","pending-properties","has_injured-properties"]});if(o.length){var a=o[0],c=document.createElement("div"),s=localStorage.getItem("current_domain");void 0!==s&&null!==s||(s="alphc.com"),a.properties.companyName&&(s=a.properties.companyName+".com"),a.properties.lastName&&(s=a.properties.lastName+".com"),a.properties.email.includes("@")&&(s=""),s.length>0&&(s="@"+s),i.render(t({email:a.properties.email+s,id:a.properties.id,property:a.properties}),c),new(r().Popup)({closeButton:!1,maxWidth:"none",offset:[0,-55]}).setDOMContent(c).setLngLat(a.geometry.coordinates).addTo(e)}},s=function(e,t,n,o,r){var i=t.filter((function(e){return 1===e.is_business||e.is_business})),s=t.filter((function(e){return 0===e.is_business||!e.is_business}));f(o,e,a.kM.property.default,"other-properties",s,(function(e){return[e.location.longitude,e.location.latitude]})),f(o,e,a.kM.property.secondary,"secondary-properties",[],(function(e){return[e.location.longitude,e.location.latitude]})),f(o,e,a.kM.property.safe,"safe-properties",[],(function(e){return[e.location.longitude,e.location.latitude]})),f(o,e,a.kM.property.pending,"pending-properties",[],(function(e){return[e.location.longitude,e.location.latitude]})),f(o,e,a.kM.property.hasInjured,"has_injured-properties",i,(function(e){return[e.location.longitude,e.location.latitude]})),e.on("click",c.bind(void 0,e,n))},u=function(e){h(e,"has_injured-properties"),h(e,"pending-properties"),h(e,"safe-properties"),h(e,"other-properties")},l=function(e){h(e,"injured-residents"),h(e,"pending-residents"),h(e,"safe-residents"),h(e,"away-residents"),h(e,"other-residents")},p=function(e){h(e,"resident-property-distances")},d=function(e,t,n,o,r,i){e.addSource(n,{type:"geojson",data:{type:"FeatureCollection",features:o.map((function(e){return{type:"Feature",properties:e,geometry:{type:"LineString",coordinates:r(e).filter((function(e){return e}))}}}))}}),e.addLayer({id:n,source:n,type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#888888","line-width":3,"line-dasharray":[2,2]}}),i&&i()},f=function(e,t,n,o,r,i,a){t.loadImage(n,(function(e,n){if(e)throw e;try{t.addImage("".concat(o,"-marker"),n),t.addSource(o,{type:"geojson",data:{type:"FeatureCollection",features:r.map((function(e){return{type:"Feature",properties:e,geometry:{type:"Point",coordinates:i(e).filter((function(e){return e}))}}}))}}),t.addLayer({id:o,source:o,type:"symbol",layout:{"icon-image":"".concat(o,"-marker"),"icon-allow-overlap":!0,"icon-anchor":"bottom","icon-size":.6}})}catch(e){console.log("add layer error:"+JSON.stringify(e))}a&&a()}))},h=function(e,t){e.hasImage("".concat(t,"-marker"))&&e.removeImage("".concat(t,"-marker")),e.getLayer(t)&&e.removeLayer(t),e.getSource(t)&&e.removeSource(t)},m=function(e,t,n){var o=t.filter((function(e){return e.location&&e.location.latitude&&"1"===e.connected})),r=t.filter((function(e){return 1==e.primaryAddress&&e.ownerMobileNumber===n.mobileNumber}));d(e,a.kM.user.injured,"resident-property-distances",o,(function(e){return[[r[0].location.longitude,r[0].location.latitude],[e.location.longitude,e.location.latitude]]}))}}}]);
//# sourceMappingURL=934.fc16eab0.chunk.js.map