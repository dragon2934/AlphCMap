"use strict";(self.webpackChunkproperty_manage_system_web=self.webpackChunkproperty_manage_system_web||[]).push([[939,243],{19246:function(e,n,a){a.d(n,{Wm:function(){return f},Jb:function(){return g},Ao:function(){return j},BX:function(){return C}});var t=a(72791),r=a(56994),s=a(42937),i=t.lazy((function(){return Promise.all([a.e(387),a.e(189)]).then(a.bind(a,28189))})),o=t.lazy((function(){return Promise.all([a.e(387),a.e(824)]).then(a.bind(a,21824))})),c=t.lazy((function(){return Promise.all([a.e(387),a.e(88)]).then(a.bind(a,99088))})),l=t.lazy((function(){return Promise.all([a.e(387),a.e(818)]).then(a.bind(a,45818))})),d=t.lazy((function(){return Promise.all([a.e(387),a.e(264)]).then(a.bind(a,12264))})),u=t.lazy((function(){return Promise.all([a.e(387),a.e(569),a.e(452)]).then(a.bind(a,9452))})),m=[{path:"/admin/",exact:!0,name:"Home"},{path:"/admin/users",exact:!0,name:"Users",component:i},{path:"/admin/users/new",exact:!0,name:"New User",component:c},{path:"/admin/users/:id",exact:!0,name:"User Details",component:o},{path:"/admin/edit/user/:id",exact:!0,name:"Edit User",component:c},{path:"/admin/file-upload",exact:!0,name:"FileUpload",component:t.lazy((function(){return Promise.all([a.e(569),a.e(342),a.e(243)]).then(a.bind(a,86243))}))},{path:"/admin/properties",exact:!0,name:"Properties",component:l},{path:"/admin/properties/new",exact:!0,name:"New Property",component:u},{path:"/admin/properties/:id",exact:!0,name:"Property Details",component:d},{path:"/admin/edit/property/:id",exact:!0,name:"Edit Property",component:u},{path:"/admin/properties/:id",exact:!0,name:"User Details",component:o}],p=a(80184),h=(s.Z,function(){return(0,p.jsx)(r.pG,{fixed:!1})}),f=t.memo(h),v=a(60364),x=a(15301),g=function(){var e=(0,v.useDispatch)(),n=(0,v.useSelector)((function(e){return e.admin.sidebarShow}));return(0,p.jsxs)(r.PO,{withSubheader:!0,children:[(0,p.jsx)(r.FP,{inHeader:!0,className:"ml-md-3 d-lg-none",onClick:function(){var a=!![!1,"responsive"].includes(n)||"responsive";e((0,x.YB)(a))}}),(0,p.jsx)(r.FP,{inHeader:!0,className:"ml-3 d-md-down-none",onClick:function(){var a=![!0,"responsive"].includes(n)&&"responsive";e((0,x.YB)(a))}}),(0,p.jsx)(r.qy,{className:"mx-auto d-lg-none",to:"/"}),(0,p.jsx)(r.g3,{className:"d-md-down-none mr-auto"}),(0,p.jsx)(r.g3,{className:"px-3",children:(0,p.jsx)(j,{})}),(0,p.jsx)(r.Mj,{className:"px-3 justify-content-between",children:(0,p.jsx)(r.s_,{className:"border-0 c-subheader-nav m-0 px-0 px-md-3",routes:m})})]})},N=a(16516),b=a(91523),j=function(){return(0,p.jsxs)(r.w5,{inNav:!0,className:"c-header-nav-items mx-2",direction:"down",children:[(0,p.jsx)(r.SQ,{className:"c-header-nav-link",caret:!1,children:(0,p.jsx)("div",{className:"c-avatar",children:(0,p.jsx)(r.sE,{src:"/assets/img/default-user.png",className:"c-avatar-img",style:{backgroundColor:"black"}})})}),(0,p.jsx)(r.$H,{className:"pt-0",placement:"bottom-end",children:(0,p.jsxs)(r.$f,{tag:b.rU,to:"/logout",children:[(0,p.jsx)(N.ZP,{name:"cil-lock-locked",className:"mfe-2"}),"Logout"]})})]})},y=function(){var e=(0,v.useDispatch)(),n=(0,v.useSelector)((function(e){return e.admin.sidebarShow}));return(0,p.jsxs)(r.z3,{show:n,onShowChange:function(n){return e((0,x.YB)(n))},children:[(0,p.jsxs)(r.Dl,{className:"d-md-down-none",to:"/",children:[(0,p.jsx)(r.sE,{className:"c-sidebar-brand-full",src:"/assets/img/logo-sm.png",height:35}),(0,p.jsx)(r.sE,{className:"c-sidebar-brand-minimized",src:"/assets/img/icon-white-small.png",height:35})]}),(0,p.jsx)(r.Xk,{children:(0,p.jsx)(r.gP,{items:[{_tag:"CSidebarNavTitle",_children:["Data"]},{_tag:"CSidebarNavItem",name:"Users",to:"/admin/users",icon:"cil-user"},{_tag:"CSidebarNavItem",name:"Properties",to:"/admin/properties",icon:"cil-home"},{_tag:"CSidebarNavTitle",_children:["Campaigns"]},{_tag:"CSidebarNavItem",name:"Email Campaigns",to:"/admin/email-campaigns",icon:"cil-home"},{_tag:"CSidebarNavItem",name:"Templates",to:"/admin/templates",icon:"cil-home"},{_tag:"CSidebarNavTitle",_children:["Marketing"]},{_tag:"CSidebarNavItem",name:"Coupons",to:"/admin/coupons",icon:"cil-user"},{_tag:"CSidebarNavItem",name:"Flyer",to:"/admin/flyers",icon:"cil-user"},{_tag:"CSidebarNavItem",name:"Promting Events",to:"/admin/events",icon:"cil-user"}],components:{CSidebarNavDivider:r.IE,CSidebarNavDropdown:r.Uu,CSidebarNavItem:r.g$,CSidebarNavTitle:r.Ig}})}),(0,p.jsx)(r.p_,{className:"c-d-md-down-none"})]})},C=t.memo(y)},47569:function(e,n,a){var t=a(74165),r=a(93433),s=a(15861),i=a(29439),o=a(72791),c=a(28958),l=a(15301),d=a(60364),u=a(80184);n.Z=function(e){var n=e.extension,a=(0,o.useState)(void 0),m=(0,i.Z)(a,2),p=m[0],h=m[1],f=(0,o.useState)({val:[]}),v=(0,i.Z)(f,2),x=v[0],g=v[1],N=(0,d.useSelector)((function(e){return e.admin.uploadedFiles})),b=(0,o.useState)([]),j=(0,i.Z)(b,2),y=j[0],C=j[1],S=(0,o.useState)([]),w=(0,i.Z)(S,2),_=(w[0],w[1]),P=(0,o.useRef)(null),k=(0,d.useDispatch)(),Z=(0,d.useSelector)((function(e){return e.auth.jwt}));console.log("extension ="+n),(0,o.useEffect)((function(){k((0,l.C7)()).then((function(e){_(e.data)}))}),[]);var D=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(n,a){var s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,r.Z)(P.current.val),console.log("uploading ..file="+JSON.stringify(a)),e.abrupt("return",c.Z.upload(a,Z,(function(e){s[n].percentage=Math.round(100*e.loaded/e.total),g({val:s})})).then((function(e){C((function(e){return[].concat((0,r.Z)(e),["Uploaded the file successfully: "+a.name])}));var t={id:e.data[0].id,url:e.data[0].url};N.push(t);var s=Array.from(p);(n+=1)<s.length?(U(500),D(n,s[n])):C((function(e){return[].concat((0,r.Z)(e),["Uploaded Completed!"])}))})).catch((function(e){console.log("upload file error.."+JSON.stringify(e)),s[n].percentage=0,g({val:s}),C((function(e){return[].concat((0,r.Z)(e),["Could not upload the file: "+a.name])}))})));case 3:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}(),U=function(e){return new Promise((function(n){return setTimeout(n,e)}))};return(0,u.jsxs)("div",{children:[x&&x.val.length>0&&x.val.map((function(e,n){return(0,u.jsxs)("div",{className:"mb-2",children:[(0,u.jsx)("span",{children:e.fileName}),(0,u.jsx)("div",{className:"progress",children:(0,u.jsxs)("div",{className:"progress-bar progress-bar-info",role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100",style:{width:e.percentage+"%"},children:[e.percentage,"%"]})})]},n)})),(0,u.jsxs)("div",{className:"row my-3",children:[(0,u.jsx)("div",{className:"col-8",children:(0,u.jsx)("label",{className:"btn btn-default p-0",children:(0,u.jsx)("input",{type:"file",accept:n,multiple:!0,onChange:function(e){h(e.target.files),console.log("file selected.."+JSON.stringify(e.target.files)),g({val:[]})}})})}),(0,u.jsx)("div",{className:"col-4",children:(0,u.jsx)("button",{className:"btn btn-success btn-sm",disabled:!p,onClick:function(e){e.preventDefault();var n=Array.from(p);console.log("files..."+JSON.stringify(n));var a=n.map((function(e){return{percentage:0,fileName:e.name}}));P.current={val:a},D(0,n[0])},children:"Upload"})})]}),y.length>0&&(0,u.jsx)("div",{className:"alert alert-secondary",role:"alert",children:(0,u.jsx)("ul",{children:y.map((function(e,n){return(0,u.jsx)("li",{children:e},n)}))})})]})}},28958:function(e,n,a){a.d(n,{Z:function(){return i}});var t=a(74569),r=a.n(t)().create({headers:{"Content-type":"application/json"}}),s=a(83708),i={upload:function(e,n,a){var t=new FormData;return t.append("files",e),r.post(s.rq+"/upload",t,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(n)},onUploadProgress:a})},getFiles:function(e){return r.get(s.rq+"/upload/files?_limit=10&_start=0&_sort=updatedAt:DESC")}}},86243:function(e,n,a){a.r(n),a.d(n,{default:function(){return u}});var t=a(72791),r=a(60364),s=a(56994),i=a(47569),o=a(19246),c=(a(83309),a(15301)),l=a(36530),d=a(80184),u=function(){var e=(0,r.useSelector)((function(e){return e.admin.uploadedFiles})),n=(0,r.useDispatch)(),a=(0,t.useCallback)((function(){console.log(". start to import csv data...uploadedFiles.."+JSON.stringify(e));var a={fileName:e[0].url};n((0,c.NA)(a)).then((function(e){console.log("...batch import ..",e)})).catch((function(e){console.log("..import error"),l.Rt.error("Error","Data import failed")}))}));return(0,d.jsxs)("div",{className:"c-app c-default-layout",children:[(0,d.jsx)(o.BX,{}),(0,d.jsxs)("div",{className:"c-wrapper",children:[(0,d.jsx)(o.Jb,{}),(0,d.jsx)("div",{className:"c-body",children:(0,d.jsx)("main",{className:"c-main",children:(0,d.jsx)(s.KB,{fluid:!0,className:"h-100",children:(0,d.jsx)("div",{className:"content",children:(0,d.jsxs)("div",{className:"container",style:{width:"600px"},children:[(0,d.jsx)("div",{className:"my-3",children:(0,d.jsx)("h4",{children:"Batch  Import Company"})}),(0,d.jsx)(i.Z,{extension:".csv"}),(0,d.jsx)("hr",{}),(0,d.jsx)(s.u5,{onClick:function(){return a()},type:"button",size:"sm",color:"primary",children:"Import"})," "]})})})})}),(0,d.jsx)(o.Wm,{})]})]})}},83309:function(){}}]);
//# sourceMappingURL=939.14c1b48e.chunk.js.map